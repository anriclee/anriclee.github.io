<!doctype html><html><div class=container><div id=navibarBasicExample class=navbar-menu><div class=navbar-start><p><a class=navbar-item href=/>Home</a></p><p><a class="navbar-item is-capitalized" href=/categories/cheaptalk>cheaptalk</a></p><p><a class="navbar-item is-capitalized" href=/categories/tech>tech</a></p></div></div><nav class="navbar level"><div class=navbar-brand><a class=nav-item href=https://anriclee.github.io/><h1 class="title is-3">AnricLee's House</h1></a></div><div class="navbar-menu has-text-centered is-active"><div class="navbar-end is-centered"><a href=https://anriclee.github.io/about rel=me><span class=icon><i class="fas fa-info"></i></span></a>
<a href=https://github.com/anriclee rel=me><span class=icon><i class="fab fa-github"></i></span></a>
<a href=https://www.linkedin.com rel=me><span class=icon><i class="fab fa-weixin"></i></span></a>
<a href=https://twitter.com rel=me><span class=icon><i class="fab fa-weibo"></i></span></a></div></div></nav></div><body><!doctype html><html lang=en-us><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>TECH | AnricLee's House</title><link rel=stylesheet href=https://anriclee.github.io//css/styles.css><link rel=stylesheet href=https://pro.fontawesome.com/releases/v5.10.0/css/all.css integrity=sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.6.0.js integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/base16/zenburn.min.css crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/highlight.min.js integrity="sha512-W7EehcwtSbRF63FIQlXEOOd5mnq0Et0V0nUOvwcUvjnCKgOLLYbqriQxEQSp63sfrkryxIg/A/O8v8O18QwQCQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>hljs.initHighlightingOnLoad()</script><script src=https://anriclee.github.io//js/highlight.js></script><script type=text/javascript src=https://anriclee.github.io//js/jssocials.js></script></html></html><div id=content><div class=container><h1 class=title>2022</h1><article class=columns><div class="column is-2"><h6 class=is-inline style=white-space:nowrap>Jan 13</h6></div><div class=column><h2 class="subtitle is-inline is-size-4-mobile is-size-3-desktop"><h1><a href=https://anriclee.github.io/posts/group-search-on-pg/>基于 PostgreSQL 的群聊搜索实践</a></h1><div class="content is-hidden-mobile">背景 2021年年初，探探上线了群聊功能，并且支持按照群名进行模糊搜索。
对于复杂场景的搜索，业界一般使用非常流行的 ElasticSearch。由于我们的群数据较少，截止到目前还没有达到千万级的量级，且搜索场景比较简单，而 PostgreSQL 对全文搜索又支持得比较好，所以选择了 PostgreSQL 来实现群搜索需求。 在使用 PostgreSQL 做群搜索的过程中，也经历了由简单到复杂的迭代过程，中间也踩了不少坑。 下面的几个例子说明了方案的演进过程和我们的优化思路，希望能够对大家有所帮助。
LIKE 模糊查询 提到模糊搜索，最简单的办法就是对搜索列进行 like 匹配： 在输入词的前后加上 % 即可,如下所示:
SELECT * FROM groups WHERE name LIKE '%探探%'; 这种方案可行是可行了，但是实现过于简单粗暴。对此方案进行测试：
…<br><a class="button is-marginless is-paddingless" href=https://anriclee.github.io/posts/group-search-on-pg/><span class="icon-link is-small" style=line-height:100%><i class="fa fa-angle-double-right" aria-hidden=true></i></span><p style="padding:0 5px">more</p></a></div></h2></div></article><h1 class=title>2021</h1><article class=columns><div class="column is-2"><h6 class=is-inline style=white-space:nowrap>Jun 26</h6></div><div class=column><h2 class="subtitle is-inline is-size-4-mobile is-size-3-desktop"><h1><a href=https://anriclee.github.io/posts/hello/>Hello</a></h1><div class="content is-hidden-mobile">Hello world!</div></h2></div></article><article class=columns><div class="column is-2"><h6 class=is-inline style=white-space:nowrap>Jun 26</h6></div><div class=column><h2 class="subtitle is-inline is-size-4-mobile is-size-3-desktop"><h1><a href=https://anriclee.github.io/posts/create-theme/>Examle Article</a></h1><div class="content is-hidden-mobile">Introduction This tutorial will show you how to create a simple theme in Hugo. I assume that you are familiar with HTML, the bash command line, and that you are comfortable using Markdown to format content. I&rsquo;ll explain how Hugo uses templates and how you can organize your templates to create a theme. I won&rsquo;t cover using CSS to style your theme.
We&rsquo;ll start with creating a new …<br><a class="button is-marginless is-paddingless" href=https://anriclee.github.io/posts/create-theme/><span class="icon-link is-small" style=line-height:100%><i class="fa fa-angle-double-right" aria-hidden=true></i></span><p style="padding:0 5px">more</p></a></div></h2></div></article><h1 class=title>2020</h1><article class=columns><div class="column is-2"><h6 class=is-inline style=white-space:nowrap>Jun 26</h6></div><div class=column><h2 class="subtitle is-inline is-size-4-mobile is-size-3-desktop"><h1><a href=https://anriclee.github.io/posts/hugo-%E4%B8%AD%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%A8%A1%E5%BC%8F/>Hugo 中的命令行模式</a></h1><div class="content is-hidden-mobile">最近在用 hugo 构建了个人博客之后，便有兴趣想研究下其源码。但是源码的体量之大，逻辑之复杂出乎我的意料。不过好在源码的结构比较清晰，有许多地方值得借鉴。
比如它的程序入口，非常简洁：
func main() { resp := commands.Execute(os.Args[1:]) if resp.Err != nil { if resp.IsUserError() { resp.Cmd.Println("") resp.Cmd.Println(resp.Cmd.UsageString()) } os.Exit(-1) } } 它将所有根据命令行参数传入的指令统一封装到 commands 包中。后面有新命令需求时，只需要新建一个 cmd 文件即可。
它是怎么做到的呢？
简而言之，就是在程序入口处将所有的命令类汇总，然后再根据输入参数args，决定要执行哪 …</div></h2></div></article></div></div><section class=section><div class="container has-text-centered"><p>&copy; <a href=https://github.com/anriclee>AnricLee</a></p></div></section></body></html>