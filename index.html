<!doctype html><html><div class=container><div id=navibarBasicExample class=navbar-menu><div class=navbar-start><p><a class=navbar-item href=/>Home</a></p><p><a class="navbar-item is-capitalized" href=/categories/tech>tech</a></p></div></div><nav class="navbar level"><div class=navbar-brand><a class=nav-item href=https://anriclee.github.io/><h1 class="title is-3">AnricLee's House</h1></a></div><div class="navbar-menu has-text-centered is-active"><div class="navbar-end is-centered"><a href=https://github.com/anriclee rel=me><span class=icon><i class="fab fa-github"></i></span></a>
<a href=https://t.me/readbyword rel=me><span class=icon><i class="fab fa-telegram"></i></span></a>
<a href=https://twitter.com/anriclee rel=me><span class=icon><i class="fab fa-twitter"></i></span></a>
<a href=https://anriclee.github.io/index.xml rel=me><span class=icon><i class="fa fa-rss"></i></span></a></div></div></nav></div><body><!doctype html><html lang=en-us><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>AnricLee's House</title><link rel=stylesheet href=https://anriclee.github.io//css/styles.css><link rel=stylesheet href=https://pro.fontawesome.com/releases/v5.10.0/css/all.css integrity=sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.6.0.js integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/styles/agate.min.css crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/highlight.min.js integrity="sha512-W7EehcwtSbRF63FIQlXEOOd5mnq0Et0V0nUOvwcUvjnCKgOLLYbqriQxEQSp63sfrkryxIg/A/O8v8O18QwQCQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>hljs.initHighlightingOnLoad()</script><script src=https://anriclee.github.io//js/highlight.js></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/jsSocials/1.5.0/jssocials.css integrity="sha512-RnlOHNqHvv1JWAQk+6/Chw2zfzPkq91LvnsOak8fJzXJ5g+msDb26UGCIXGhTAgVGrFgsXZx0PM1i7iFXY/5KQ==" crossorigin=anonymous referrerpolicy=no-referrer><script type=text/javascript src=https://anriclee.github.io/js/jssocials.js></script></html><div id=content><div class=container><div class=columns><div class=column><div class=container><h1 class=title>2022</h1><article class=columns><div class="column is-2"><h6 class=is-inline style=white-space:nowrap>Jun 11</h6></div><div class=column><h2 class="subtitle is-inline is-size-4-mobile is-size-3-desktop"><h1><a href=https://anriclee.github.io/posts/demo/>Demo</a></h1><div class="content is-hidden-mobile">And in the naked light I saw ten thousand people, maybe more. People talking without speaking, people hearing without listening. People writing songs that voices never shared, no one dared disturb the sound of silence.
— The sound of silence
美利坚合众国，2015年，纽约。
.aspect-ratio { position: relative; width: 100%; height: 0; padding-bottom: 75%; } .aspect-ratio iframe { position: absolute; width: 100%; …<br><a class="button is-marginless is-paddingless" href=https://anriclee.github.io/posts/demo/><span class="icon-link is-small" style=line-height:100%><i class="fa fa-angle-double-right" aria-hidden=true></i></span><p style="padding:0 5px">more</p></a></div></h2></div></article><article class=columns><div class="column is-2"><h6 class=is-inline style=white-space:nowrap>Jun 11</h6></div><div class=column><h2 class="subtitle is-inline is-size-4-mobile is-size-3-desktop"><h1><a href=https://anriclee.github.io/posts/telegram/use_vercel_deploy_bot/>使用 Vercel 部署 telegram bot</a></h1><div class="content is-hidden-mobile">什么是 Bot Bot 的概念在官网的介绍稍微有点繁琐和复杂，详细可以了解官网介绍，
简单来说，bot 就是你在 telegram 中的一个特殊账号，你申请了 bot，这个 bot 就是你的代理人，你发号施令到 bot，bot 会响应你的指令，仅此而已。
申请 bot 需要找 BotFather（名字起的很形象），具体过程官网说的比较详细，此处不赘言。但是需要强调的一点是，bot 仅仅是你的代理人而已，真正执行你指令的是你自己部署的脚本，如果你不部署自己的脚本，在 bot 中输入指令，是没有任何响应的。
你、bot和你部署的脚本关系如下:
你、bot和你部署的脚本 脚本 上面说过了，bot 只是你在 telegram 的一个代理，真正干活的是你的脚本。既然自己写脚本，就会存在两个问题：接受指令、做出响应。
接受指令 对于如何让脚本接受指令，官方提供了两种思路：推模式 、拉模式。
拉 …<br><a class="button is-marginless is-paddingless" href=https://anriclee.github.io/posts/telegram/use_vercel_deploy_bot/><span class="icon-link is-small" style=line-height:100%><i class="fa fa-angle-double-right" aria-hidden=true></i></span><p style="padding:0 5px">more</p></a></div></h2></div></article><article class=columns><div class="column is-2"><h6 class=is-inline style=white-space:nowrap>Jan 13</h6></div><div class=column><h2 class="subtitle is-inline is-size-4-mobile is-size-3-desktop"><h1><a href=https://anriclee.github.io/posts/pg/>基于 PostgreSQL 的群聊搜索实践</a></h1><div class="content is-hidden-mobile">背景 2021年年初，探探上线了群聊功能，并且支持按照群名进行模糊搜索。
对于复杂场景的搜索，业界一般使用非常流行的 ElasticSearch。由于我们的群数据较少，截止到目前还没有达到千万级的量级，且搜索场景比较简单，而 PostgreSQL 对全文搜索又支持得比较好，所以选择了 PostgreSQL 来实现群搜索需求。 在使用 PostgreSQL 做群搜索的过程中，也经历了由简单到复杂的迭代过程，中间也踩了不少坑。 下面的几个例子说明了方案的演进过程和我们的优化思路，希望能够对大家有所帮助。
LIKE 模糊查询 提到模糊搜索，最简单的办法就是对搜索列进行 like 匹配： 在输入词的前后加上 % 即可,如下所示:
SELECT * FROM groups WHERE name LIKE '%探探%'; 这种方案可行是可行了，但是实现过于简单粗暴。对此方案进行测试：
建一张简单的表进 …<br><a class="button is-marginless is-paddingless" href=https://anriclee.github.io/posts/pg/><span class="icon-link is-small" style=line-height:100%><i class="fa fa-angle-double-right" aria-hidden=true></i></span><p style="padding:0 5px">more</p></a></div></h2></div></article><h1 class=title>2020</h1><article class=columns><div class="column is-2"><h6 class=is-inline style=white-space:nowrap>Jun 26</h6></div><div class=column><h2 class="subtitle is-inline is-size-4-mobile is-size-3-desktop"><h1><a href=https://anriclee.github.io/posts/hugo-%E4%B8%AD%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%A8%A1%E5%BC%8F/>Hugo 中的命令行模式</a></h1><div class="content is-hidden-mobile">最近在用 hugo 构建了个人博客之后，便有兴趣想研究下其源码。但是源码的体量之大，逻辑之复杂出乎我的意料。不过好在源码的结构比较清晰，有许多地方值得借鉴。
比如它的程序入口，非常简洁：
func main() { resp := commands.Execute(os.Args[1:]) if resp.Err != nil { if resp.IsUserError() { resp.Cmd.Println("") resp.Cmd.Println(resp.Cmd.UsageString()) } os.Exit(-1) } } 它将所有根据命令行参数传入的指令统一封装到 commands 包中。后面有新命令需求时，只需要新建一个 cmd 文件即可。
它是怎么做到的呢？
简而言之，就是在程序入口处将所有的命令类汇总，然后再根据输入参数args，决定要执行哪 …</div></h2></div></article></div><section class=section><div class=container><nav class="level is-mobile"><div class=level-left><div class=level-item><a class="button is-rounded" disabled><span class="icon is-small is-marginless"><i class="fa fa-angle-left"></i></span>
Newer</a></div></div><div class="level-right is-marginless"><div class=level-item><a class="button is-rounded" disabled><span class="icon is-small is-marginless"><i class="fa fa-angle-right"></i></span>
Older</a></div></div></nav></div></section></div></div></div></div><section class=section><div class="container has-text-centered"><p>Copyright &copy; <a href=https://github.com/anriclee>AnricLee's Blog</a></p></div></section></body></html>