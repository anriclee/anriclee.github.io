<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>ReadByWord</title>
    <link>https://anriclee.github.io/</link>
    <description>Recent content on ReadByWord</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Sun, 21 Aug 2022 12:46:41 +0800</lastBuildDate><atom:link href="https://anriclee.github.io/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>PaperModX New Features</title>
      <link>https://anriclee.github.io/docs/papermodx-new-features/</link>
      <pubDate>Tue, 12 Apr 2022 23:37:00 +0800</pubDate>
      
      <guid>https://anriclee.github.io/docs/papermodx-new-features/</guid>
      <description>This page explains the new features and changes of PaperModX comparing to the original PaperMod.</description>
      <content:encoded><![CDATA[<p>This page explains the new features and changes of PaperModX
comparing to the original PaperMod.</p>
<h2 id="table-of-contents-toc-floating-on-the-side">Table of Contents (ToC) floating on the side</h2>
<p>By adding config:</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">params</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">TocSide</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;left&#39;</span><span class="w">  </span><span class="c"># or &#39;right&#39;</span><span class="w">
</span></code></pre></div><p>ToC will float on the left/right side of the page.
You can take a look at how <code>'right'</code> feels like in <a href="https://reorx.github.io/hugo-PaperModX/docs/installation/">Installation | Update</a>.</p>
<p>The ToC box is responsive, it only shows on the side when minimum screen size is 1440px.</p>
<p>This feature is enabled on this site.</p>
<h2 id="instantclick-integration">InstantClick integration</h2>
<p>By adding config:</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">params</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">EnableInstantClick</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></code></pre></div><p><a href="http://instantclick.io/">InstantClick</a> will be enabled,
making navigation behaves like Single Page Application.</p>
<p>Note that <code>/search</code> pages are omitted from InstantClick
to prevent conflicts from search&rsquo;s JavaScript,
this may be changed in the future after refactoring those scripts.</p>
<p>Another thing to notice is smooth scrolling will be disabled
if InstantClick is enabled, because they both listen click
event on every <code>&lt;a&gt;</code> tags. IMO smooth scrolling is not very useful
so it has to give way to InstantCllick.</p>
<p>This feature is enabled on this site.</p>
<h2 id="give-links-an-accent-color">Give links an accent color.</h2>
<p>Though PaperModX is designed to be minimal, accent color is still essential.
It&rsquo;s a good way to show personality and make your site feels more delightful.</p>
<p>The default color is a purple vibe,
you can customize the colors of link, link underline and their hover variants
by override the following css variables in <code>assets/css/extended/custom.css</code> of your site.</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="p">:</span><span class="nd">root</span> <span class="p">{</span>
  <span class="nv">--link-color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary</span><span class="p">);</span>
  <span class="nv">--link-hover-color</span><span class="p">:</span> <span class="mh">#573eaa</span><span class="p">;</span>
  <span class="nv">--link-underline-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">1</span><span class="kt">px</span> <span class="mi">0</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">link</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
  <span class="nv">--link-hover-underline-color</span><span class="p">:</span> <span class="mh">#573eaa</span><span class="p">;</span>
  <span class="nv">--link-hover-underline-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">2</span><span class="kt">px</span> <span class="mi">0</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">link</span><span class="o">-</span><span class="n">hover</span><span class="o">-</span><span class="kc">underline</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h2 id="customize-pagniator-size">Customize pagniator size</h2>
<p>In section pages, if you want the paginator size be different from the
<a href="https://gohugo.io/templates/pagination/#configure-pagination">global config</a>,
you can add <code>paginate</code> in the frontmatter to customize.</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="nt">paginate</span><span class="p">:</span><span class="w"> </span><span class="m">10</span><span class="w">
</span><span class="w"></span><span class="nn">---</span><span class="w">
</span></code></pre></div><h2 id="menus-external-link">Menus external link</h2>
<p>You can add <code>external: true</code> to a menu item&rsquo;s params to mark it as an external link,
this will add a small icon to the end, and make the link open in new tab when clicked.</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">menu</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">main</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;@Author&#34;</span><span class="w">
</span><span class="w">      </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://reorx.com&#34;</span><span class="w">
</span><span class="w">      </span><span class="nt">params</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">external</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></code></pre></div><h2 id="highlight-code-with-chroma-no-bullshit">Highlight code with Chroma, no bullshit</h2>
<p>PaperMod uses highlight.js to highlight code blocks.
In PaperModX, we use Chroma which is the recommended way in Hugo&rsquo;s
<a href="https://gohugo.io/content-management/syntax-highlighting/#:~:text=Hugo%20uses%20Chroma%20as%20its%20code%20highlighter%3B%20it%20is%20built%20in%20Go%20and%20is%20really%2C%20really%20fast">official docs</a>,
thus changing theme is easily supported.</p>
<p>By default the themes are <code>github</code> for light and <code>dracula</code> for dark,
you can change it by adding <code>chroma-light.css</code> and <code>chroma-dark.css</code>
in site&rsquo;s <code>assets/css/lib</code> directory.</p>
<h2 id="social-icons-from-simple-icons">Social icons from Simple Icons</h2>
<p>Add social icons with <code>-simple</code> suffix from <a href="https://simpleicons.org/">Simple Icons</a>.</p>
<p>Available icons:</p>
<ul>
<li>github-simple</li>
<li>rss-simple</li>
<li>telegram-simple</li>
<li>twitter-simple</li>
<li>pinboard-simple</li>
</ul>
<p>The icons are moved from <code>layouts/partials/svg.html</code> to <code>data/svg.toml</code>,
makes it easier to maintain, it&rsquo;s now possible to have an index page
to show all the icons, check it out at: <a href="https://reorx.github.io/hugo-PaperModX/docs/icons_preview/">Icons Preview</a></p>
<h2 id="opinionated-ui-enhancements">Opinionated UI enhancements</h2>
<ul>
<li>Distinguish home page width and post page width, post page is wider
(800px) for better readability, you can change it by <code>--post-width</code> in <code>theme-vars.css</code>.</li>
<li>Menu links are always bold, this feels more consistent when clicking around. Active links have deeper color.</li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Icons Preview</title>
      <link>https://anriclee.github.io/docs/icons_preview/</link>
      <pubDate>Wed, 13 Apr 2022 00:00:00 +0000</pubDate>
      
      <guid>https://anriclee.github.io/docs/icons_preview/</guid>
      <description>Index of all icons in PaperModeX</description>
      <content:encoded><![CDATA[]]></content:encoded>
    </item>
    
    <item>
      <title>书单</title>
      <link>https://anriclee.github.io/posts/readings/booklist/</link>
      <pubDate>Sun, 21 Aug 2022 12:46:41 +0800</pubDate>
      
      <guid>https://anriclee.github.io/posts/readings/booklist/</guid>
      <description>在读  《深入理解Java虚拟机》(二刷) 《Redis设计与实现》（黄建宏） 《张居正》（熊召政）  读完  《Unix传奇》（布莱恩·W·克尼汉） 《邓小平时代》(傅高义) 《置身事内》（兰小欢） 《富爸爸穷爸爸》（罗伯特·清崎）  想读  《数据库系统内幕》 《人生的智慧》   to be continued</description>
      <content:encoded><![CDATA[<h3 id="在读">在读</h3>
<ul>
<li>《深入理解Java虚拟机》(二刷)</li>
<li>《Redis设计与实现》（黄建宏）</li>
<li>《张居正》（熊召政）</li>
</ul>
<h3 id="读完">读完</h3>
<ul>
<li>《Unix传奇》（布莱恩·W·克尼汉）</li>
<li>《邓小平时代》(傅高义)</li>
<li>《置身事内》（兰小欢）</li>
<li>《富爸爸穷爸爸》（罗伯特·清崎）</li>
</ul>
<h3 id="想读">想读</h3>
<ul>
<li>《数据库系统内幕》</li>
<li>《人生的智慧》</li>
<li></li>
</ul>
<p>to be continued</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Telegram bot 入门实践</title>
      <link>https://anriclee.github.io/posts/telegram_bot/</link>
      <pubDate>Sat, 11 Jun 2022 11:43:42 +0800</pubDate>
      
      <guid>https://anriclee.github.io/posts/telegram_bot/</guid>
      <description>什么是 Bot Bot 的概念在官网的介绍稍微有点繁琐和复杂，详细可以了解官网介绍，
简单来说，bot 就是你在 telegram 中的一个特殊账号，你申请了 bot，这个 bot 就是你的代理人，你发号施令到 bot，bot 会响应你的指令，仅此而已。
申请 bot 需要找 BotFather（名字起的很形象），具体过程官网说的比较详细，此处不赘言。但是需要强调的一点是，bot 仅仅是你的代理人而已，真正执行你指令的是你自己部署的脚本，如果你不部署自己的脚本，在 bot 中输入指令，是没有任何响应的。
你、bot和你部署的脚本关系如下:

脚本 上面说过了，bot 只是你在 telegram 的一个代理，真正干活的是你的脚本。既然自己写脚本，就会存在两个问题：接受指令、做出响应。
接受指令 对于如何让脚本接受指令，官方提供了两种思路：推模式 、拉模式。
 拉模式  这种模式，官方不太推荐。简单而言，就是自己部署一个脚本，不断执行 get 请求，获取自己 bot 的更新信息，就好比一个仆人一直在问你：
有没有需要我做的？
有没有需要我做的？
有没有需要我做的？
询问的方式也比较简单：
curl -X GET https://api.telegram.org/bot[token]/getUpdates 这里的 token，就是上面申请 bot 完毕后，得到的 token， 出于脱敏，我使用 [token] 代替，下同。这种方法比较笨拙，轮询的频次太高和太低都不行，而且你在 bot 中发布一条指令后，可能并不能够马上得到执行，会有延迟。
这种方式的好处是：可以让 bot 启在本地，不需要部署到服务器上，因为 telegram 不知道你的存在，他也不需要知道你的存在。
 推模式  这种方式是官方比较推荐的一种方式，这种类似事件驱动的原理。只有有任务了，才会通知脚本去做。但前提是：在向 bot 发号施令前，需要在 bot 中注册一个 callback url。</description>
      <content:encoded><![CDATA[<h1 id="什么是-bot">什么是 Bot</h1>
<p>Bot 的概念在官网的介绍稍微有点繁琐和复杂，详细可以了解<a href="https://core.telegram.org/bots">官网介绍</a>，</p>
<p>简单来说，bot 就是你在 telegram 中的一个特殊账号，你申请了 bot，这个 bot 就是你的代理人，你发号施令到 bot，bot 会响应你的指令，仅此而已。</p>
<p>申请 bot 需要找 BotFather（名字起的很形象），具体过程官网说的比较详细，此处不赘言。但是需要强调的一点是，bot 仅仅是你的代理人而已，真正执行你指令的是你自己部署的脚本，如果你不部署自己的脚本，在 bot 中输入指令，是没有任何响应的。</p>
<p>你、bot和你部署的脚本关系如下:</p>
<p></p>
<h1 id="脚本">脚本</h1>
<p>上面说过了，bot 只是你在 telegram 的一个代理，真正干活的是你的脚本。既然自己写脚本，就会存在两个问题：接受指令、做出响应。</p>
<h2 id="接受指令">接受指令</h2>
<p>对于如何让脚本接受指令，官方提供了两种思路：推模式 、拉模式。</p>
<ul>
<li>拉模式</li>
</ul>
<p>这种模式，官方不太推荐。简单而言，就是自己部署一个脚本，不断执行 get 请求，获取自己 bot 的更新信息，就好比一个仆人一直在问你：</p>
<p>有没有需要我做的？</p>
<p>有没有需要我做的？</p>
<p>有没有需要我做的？</p>
<p>询问的方式也比较简单：</p>
<pre><code>curl -X GET https://api.telegram.org/bot[token]/getUpdates
</code></pre><p>这里的 token，就是上面申请 bot 完毕后，得到的 token， 出于脱敏，我使用 [token] 代替，下同。这种方法比较笨拙，轮询的频次太高和太低都不行，而且你在 bot 中发布一条指令后，可能并不能够马上得到执行，会有延迟。</p>
<p>这种方式的好处是：可以让 bot 启在本地，不需要部署到服务器上，因为 telegram 不知道你的存在，他也不需要知道你的存在。</p>
<ul>
<li>推模式</li>
</ul>
<p>这种方式是官方比较推荐的一种方式，这种类似事件驱动的原理。只有有任务了，才会通知脚本去做。但前提是：在向 bot 发号施令前，需要在 bot 中注册一个 callback url。</p>
<p>bot 在接受你的指令后，会调用此 url，通知你的脚本，让他执行任务。</p>
<p>注册方式也比较简单：</p>
<pre><code>curl -X POST https://api.telegram.org/bot[token]/setWebhook -H &quot;Content-type: application/json&quot; -d '{&quot;url&quot;: &quot;[YOUR_URL]&quot;}
</code></pre><p>使用这种方式，会比上一种稍微麻烦一点，需要你部署的服务能够支持 https（这也是为了安全起见）。</p>
<h3 id="响应指令">响应指令</h3>
<p>收到 telegram 的指令后，如何发送消息到 telegram 频道呢？笔者对 golang 较为熟悉，所以采用了 golang 的方式进行响应。</p>
<div class="highlight"><pre class="chroma"><code class="language-Golang" data-lang="Golang"><span class="kd">func</span> <span class="nf">Handler</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">err</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">ParseForm</span><span class="p">()</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;parse form values failed:%+v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">body</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">GetBody</span><span class="p">()</span>
	<span class="nx">bytes</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">io</span><span class="p">.</span><span class="nf">ReadAll</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>
	<span class="nx">msg</span> <span class="o">:=</span> <span class="nb">string</span><span class="p">(</span><span class="nx">bytes</span><span class="p">)</span>
	<span class="c1">// ...... 读取到 query 参数和 body 后，可以进行各种逻辑操作
</span><span class="c1"></span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintf</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="s">&#34;result:&#34;</span><span class="o">+</span><span class="nx">content</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>上面的代码使用到了一个<a href="https://github.com/go-telegram-bot-api/telegram-bot-api">开源库</a>，他替我们封装好了api（当然也可以自己按照 telegram 的协议组装消息）。</p>
<h2 id="部署脚本">部署脚本</h2>
<p>现在有了 bot，也有了响应 bot 的脚本逻辑，只剩部署脚本到服务器了。我们当然不能仅仅为了响应一条指令租一个个人服务器吧（土豪除外）。</p>
<p>笔者用的是 Vercel 平台，使用 Vercel 部署 ServeLess 的 Function 还是比较方便的，部署过程，跟随步骤指导一步一步来比较容易。</p>
<p><a href="https://vercel.com/">https://vercel.com/</a></p>
<p>部署好之后，可以先在本地执行下 curl 请求，测试没问题后，将该 url 设置为 telegram bot 的 callback 函数即可。</p>
<h2 id="使用">使用</h2>
<p>学会一个东西的主要方法，就是疯狂的使用它。本人出入办公单位，都需要扫门禁二维码，不胜其烦，需要关注微信小程序，然后点击门禁二维码，全程既慢且麻烦。</p>
<p>在一次偶然抓包之后，发现获取二维码的请求是一个简单的 http post 请求，且密码为明文。</p>
<p>这次体验到了 Serveless 的方便，出于 bot 练习之故，可以将该请求封装到 script 中，部署到 vercel 平台上，在 telegram 申请一个门禁机器人，打开之后，发送指令到 script，script 发起 post 调用，获取到结果后，渲染为二维码即可。</p>
<p>渲染二维码使用到的<a href="https://github.com/skip2/go-qrcode">开源包</a></p>
<h2 id="请求安全性校验">请求安全性校验</h2>
<p>为了安全起见，有人恶意调用你的脚本 url，可以将自己脚本服务的 api 的前缀设置为 token（token 没有人知道，所以也无法知道的 api）。vercel 平台支持通过 vercel.json 进行请求的重定向，可以通过正则表达式，将 <code>randomwdocd23123123[token 示例]/api</code> 转发到 <code>/api</code>。</p>
<div class="highlight"><pre class="chroma"><code class="language-Json" data-lang="Json"><span class="p">{</span>
   <span class="nt">&#34;routes&#34;</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="nt">&#34;src&#34;</span><span class="p">:</span><span class="s2">&#34;/random/(?&lt;id&gt;[^/]*)/api/hello/&#34;</span><span class="p">,</span>
         <span class="nt">&#34;dest&#34;</span><span class="p">:</span><span class="s2">&#34;/api/hello.go?id=$id&#34;</span>
      <span class="p">}</span>
   <span class="p">]</span>
<span class="p">}</span>
</code></pre></div><p>这是利用了官方提供的重定向的特性，详细可以参考<a href="https://vercel.com/docs/project-configuration#">官网</a></p>
<h1 id="reference">reference</h1>
<p>1.<a href="https://www.marclittlemore.com/serverless-telegram-chatbot-vercel/">Build a serverless Telegram chatbot deployed using Vercel</a></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>基于 PostgreSQL 的群聊搜索实践</title>
      <link>https://anriclee.github.io/posts/pg/</link>
      <pubDate>Thu, 13 Jan 2022 00:00:00 +0000</pubDate>
      
      <guid>https://anriclee.github.io/posts/pg/</guid>
      <description>背景 2021年年初，探探上线了群聊功能，并且支持按照群名进行模糊搜索。
对于复杂场景的搜索，业界一般使用非常流行的 ElasticSearch。由于我们的群数据较少，截止到目前还没有达到千万级的量级，且搜索场景比较简单，而 PostgreSQL 对全文搜索又支持得比较好，所以选择了 PostgreSQL 来实现群搜索需求。 在使用 PostgreSQL 做群搜索的过程中，也经历了由简单到复杂的迭代过程，中间也踩了不少坑。 下面的几个例子说明了方案的演进过程和我们的优化思路，希望能够对大家有所帮助。
LIKE 模糊查询 提到模糊搜索，最简单的办法就是对搜索列进行 like 匹配： 在输入词的前后加上 % 即可,如下所示:
SELECT * FROM groups WHERE name LIKE &#39;%探探%&#39;; 这种方案可行是可行了，但是实现过于简单粗暴。对此方案进行测试：
建一张简单的表进行测试，表结构如下：
lixuehan=# \d groups; Table &amp;quot;public.groups&amp;quot; Column | Type | Collation | Nullable | Default --------+-----------------------+-----------+----------+------------------------------------ id | bigint | | not null | nextval(&#39;groups_id_seq&#39;::regclass) name | character varying(50) | | | Indexes: &amp;quot;groups_pkey&amp;quot; PRIMARY KEY, btree (id) 表中只有两列：主键 id 以及群名 name。</description>
      <content:encoded><![CDATA[<h2 id="背景">背景</h2>
<p>2021年年初，探探上线了群聊功能，并且支持按照群名进行模糊搜索。</p>
<p>对于复杂场景的搜索，业界一般使用非常流行的 ElasticSearch。由于我们的群数据较少，截止到目前还没有达到千万级的量级，且搜索场景比较简单，而 PostgreSQL 对全文搜索又支持得比较好，所以选择了 PostgreSQL 来实现群搜索需求。
在使用 PostgreSQL 做群搜索的过程中，也经历了由简单到复杂的迭代过程，中间也踩了不少坑。 下面的几个例子说明了方案的演进过程和我们的优化思路，希望能够对大家有所帮助。</p>
<h2 id="like-模糊查询">LIKE 模糊查询</h2>
<p>提到模糊搜索，最简单的办法就是对搜索列进行 like 匹配： 在输入词的前后加上 <code>%</code> 即可,如下所示:</p>
<pre><code>SELECT * FROM groups WHERE name LIKE '%探探%';
</code></pre><p>这种方案可行是可行了，但是实现过于简单粗暴。对此方案进行测试：</p>
<p>建一张简单的表进行测试，表结构如下：</p>
<pre><code>lixuehan=# \d groups;
                                   Table &quot;public.groups&quot;
 Column |         Type          | Collation | Nullable |              Default
--------+-----------------------+-----------+----------+------------------------------------
 id     | bigint                |           | not null | nextval('groups_id_seq'::regclass)
 name   | character varying(50) |           |          |
Indexes:
    &quot;groups_pkey&quot; PRIMARY KEY, btree (id)
</code></pre><p>表中只有两列：主键 <code>id</code> 以及群名 <code>name</code>。</p>
<pre><code>create or replace function gen_hanzi(int) returns text as $$
declare
    res text;
begin
    if $1 &gt;=1 then
        select string_agg(chr(19968+(random()*20901)::int), '') into res from generate_series(1,$1);
        return res;
    end if;
    return null;
end;
$$ language plpgsql strict;

</code></pre><p><code>gen_hanzi</code> 是一个随机生成汉字的函数，我们使用一个该函数构造 100w 条数据，插入到该表中。</p>
<pre><code>lixuehan=# insert into groups(name) select gen_hanzi(20) from generate_series(1,1000000);
INSERT 0 1000000
lixuehan=# select count(*) from groups;
 count
--------
 1000000
(1 row)
</code></pre><p>现在开始对上表根据 <code>name</code> 列进行 like 搜索。</p>
<pre><code>SELECT * FROM groups WHERE name LIKE '%探探%';
</code></pre><p>查看其执行计划</p>
<pre><code>lixuehan=# explain analyze select * from groups where name like '%探探%';
                                                       QUERY PLAN
------------------------------------------------------------------------------------------------------------------------
 Gather  (cost=1000.00..20321.24 rows=110 width=69) (actual time=0.388..116.679 rows=1 loops=1)
   Workers Planned: 2
   Workers Launched: 2
   -&gt;  Parallel Seq Scan on groups  (cost=0.00..19310.24 rows=46 width=69) (actual time=64.666..101.982 rows=0 loops=3)
         Filter: ((name)::text ~~ '%探探%'::text)
         Rows Removed by Filter: 366671
 Planning Time: 0.182 ms
 Execution Time: 116.694 ms
</code></pre><p>搜索执行耗时接近 <code>117ms</code>，全表扫描，显然有优化空间。</p>
<h3 id="建-btree-索引">建 Btree 索引</h3>
<p>在 PostgreSQL 官方网站上看到了这样一句话：</p>
<blockquote>
<p>The optimizer can also use a B-tree index for queries involving the pattern matching operators LIKE and ~
if the pattern is a constant and is anchored to the beginning of the string —
for example, col LIKE &lsquo;foo%&rsquo; or col ~ &lsquo;^foo&rsquo;, <strong>but not col LIKE &lsquo;%bar&rsquo;</strong>.</p>
</blockquote>
<p>官方推荐的做法是给搜索列建立 btree 索引，但是不支持前模糊查询（为避免歧义，这里的「前模糊查询」指的是前缀不确定的查询，「后模糊查询」指的是后缀不确定的查询，后面不再赘述）。</p>
<p>于是，我们尝试对 <code>name</code> 列构建 <code>btree</code> 索引。</p>
<pre><code>create index group_name_idx on groups using btree(name);
</code></pre><p>然后再对该表执行查询，分别执行前模糊、后模糊和两边均模糊三种：</p>
<pre><code>lixuehan=# explain analyze select * from groups where name like '%探探大群%';
                                                       QUERY PLAN
-------------------------------------------------------------------------------------------------------------------------
 Gather  (cost=1000.00..20321.24 rows=110 width=127) (actual time=0.158..108.548 rows=1 loops=1)
   Workers Planned: 2
   Workers Launched: 2
   -&gt;  Parallel Seq Scan on groups  (cost=0.00..19310.24 rows=46 width=127) (actual time=66.183..101.712 rows=0 loops=3)
         Filter: ((name)::text ~~ '%探探大群%'::text)
         Rows Removed by Filter: 366671
 Planning Time: 0.098 ms
 Execution Time: 108.756 ms
(8 rows)

lixuehan=# explain analyze select * from groups where name like '探探大群%';
                                                         QUERY PLAN
----------------------------------------------------------------------------------------------------------------------------
 Index Scan using groups_name_idx on groups  (cost=0.55..8.57 rows=110 width=127) (actual time=0.810..0.811 rows=1 loops=1)
   Index Cond: (((name)::text &gt;= '探探大群'::text) AND ((name)::text &lt; '探探大羥'::text))
   Filter: ((name)::text ~~ '探探大群%'::text)
 Planning Time: 1.229 ms
 Execution Time: 0.829 ms
(5 rows)

lixuehan=# explain analyze select * from groups where name like '%探探大群';
                                                       QUERY PLAN
------------------------------------------------------------------------------------------------------------------------
 Gather  (cost=1000.00..20321.24 rows=110 width=127) (actual time=0.161..104.288 rows=1 loops=1)
   Workers Planned: 2
   Workers Launched: 2
   -&gt;  Parallel Seq Scan on groups  (cost=0.00..19310.24 rows=46 width=127) (actual time=64.530..98.686 rows=0 loops=3)
         Filter: ((name)::text ~~ '%探探大群'::text)
         Rows Removed by Filter: 366671
 Planning Time: 0.094 ms
 Execution Time: 104.315 ms
(8 rows)


</code></pre><p>可以看到，<strong>只有在执行后模糊查询时</strong>，命中索引，耗时缩短到了 <code>0.829ms</code>。</p>
<p>不支持前模糊查询没有关系，再建一个反向索引即可：</p>
<pre><code>CREATE INDEX ON groups(reverse(name));
</code></pre><p>执行搜索时，执行反向查询，如下：</p>
<pre><code>select * from groups where reverse(name) like reverse('%探探');
</code></pre><p>查看其执行计划：</p>
<pre><code>Bitmap Heap Scan on groups  (cost=292.93..10708.01 rows=5500 width=127)
   Filter: (reverse((name)::text) ~~ '探探%'::text)
   -&gt;  Bitmap Index Scan on groups_reverse_idx  (cost=0.00..291.55 rows=5500 width=0)
         Index Cond: ((reverse((name)::text) &gt;= '探探'::text) AND (reverse((name)::text) &lt; '探掣'::text))
(4 rows)
</code></pre><p>可以看到已经命中了 <code>groups_reverse_idx</code> 索引。</p>
<p>这样，在业务代码中最多执行两次，即可实现前后模糊搜索（虽然看起来比较笨，但是也勉强实现了需求）。但是接下来，遇到的问题让人感到头疼。</p>
<p>在执行简单测试时，发现我们的测试环境可以走索引，但是生产环境却不能！！！</p>
<p>在查询资料后，得知这种模糊查询命中索引的方案跟数据库的 <code>Locale</code> 设置有关系，而当时我们生产环境的设置和测试环境的 <code>Locale</code> 设置是不一样的。</p>
<p>可以执行下面的命令查询一个库的 <code>Locale</code> 设置。</p>
<pre><code>lixuehan=# \l+ lixuehan
                                            List of databases
   Name   |  Owner   | Encoding | Collate | Ctype | Access privileges | Size  | Tablespace | Description
----------+----------+----------+---------+-------+-------------------+-------+------------+-------------
 lixuehan | lixuehan | UTF8     | C       | C     |                   | 28 MB | pg_default |
(1 row)
</code></pre><p>这里的 <code>Collate</code> 和 <code>Ctype</code> 就是跟 <code>Locale</code> 相关的两个参数，在 <code>Ctype</code> 为 <code>en_US.UTF-8</code> 时，直接对搜索列建 <code>Btree</code> 索引，无法实现预期效果。</p>
<p>上面我们用来举例的数据库，正好 <code>Ctype</code> 和 <code>Collate</code> 均为 <code>C</code>，是支持模糊搜索的。对于这两个参数的设置，官网有如下描述：</p>
<blockquote>
<p>Some locale categories must have their values fixed when the database is created.
You can use different settings for different databases, but <strong>once a database is created, you cannot change them for that database anymore</strong>.
LC_COLLATE and LC_CTYPE are these categories.</p>
</blockquote>
<p>这里说的很明白，一旦数据库被创建了，就不能更改其 <code>LC_COLLATE</code> 和 <code>LC_CTYPE</code> 设置了（这两个参数分别对应上面的 <code>Collate</code> 和 <code>Ctype</code>）。</p>
<p>为此，再建一个 <code>Locale</code> 非 <code>C</code> 的数据库，重复上面的查询。</p>
<pre><code>create database lixuehan2 LC_COLLATE 'en_US.UTF-8' LC_CTYPE 'en_US.UTF-8' TEMPLATE template0;
</code></pre><pre><code>lixuehan2=# explain analyze select * from groups where name like '探%';
                                                      QUERY PLAN
-----------------------------------------------------------------------------------------------------------------------
 Gather  (cost=1000.00..20321.17 rows=110 width=69) (actual time=0.364..71.770 rows=59 loops=1)
   Workers Planned: 2
   Workers Launched: 2
   -&gt;  Parallel Seq Scan on groups  (cost=0.00..19310.17 rows=46 width=69) (actual time=1.583..58.687 rows=20 loops=3)
         Filter: ((name)::text ~~ '探%'::text)
         Rows Removed by Filter: 366647
 Planning Time: 0.225 ms
 Execution Time: 71.798 ms
(8 rows)

</code></pre><p>可以看到，执行计划已经变为全表扫描，无法达到预期效果。</p>
<p>那么 <code>Locale</code> 是什么？</p>
<p>维基百科给出的解释：</p>
<blockquote>
<p>区域设置（locale），也称作“本地化策略集”、“本地环境”，是表达程序用户地区方面的软件设定。不同系统、平台、与软件有不同的区域设置处理方式和不同的设置范围，但是一般区域设置最少也会包括语言和地区。操作系统的区域设置通常比较复杂。区域设置的内容包括：数据格式、货币金额格式、小数点符号、千分位符号、度量衡单位、通货符号、日期写法、日历类型、文字排序、姓名格式、地址等等。</p>
</blockquote>
<p>简单来说，就是一个与区域文化相关的内容显示及解析问题。</p>
<p>为什么 <code>LC_TYPE</code> 为 <code>en_US.UTF-8</code> 类型的 <code>Locale</code>，不能支持中文的 like 索引？</p>
<p>这里摘抄 PostgreSQL 官方给出的解释：</p>
<blockquote>
<p>On all platforms, the collations named default, C, and POSIX are available.
Additional collations may be available depending on operating system support.
The default collation selects the LC_COLLATE and LC_CTYPE values specified at database creation time.
The C and POSIX collations both specify “traditional C” behavior, in which only the ASCII letters “A” through “Z” are treated as letters, and sorting is done strictly by character code byte values.</p>
</blockquote>
<p>总结就是：在所有平台上，名为 <code>default</code>、<code>C</code> 和 <code>POSIX</code> 的排序规则都可用，其他的排序必须操作系统支持。数据库默认只支持 <code>C</code> 和 <code>POSIX</code> 排序，而其排序方式就是最简单的按照 <code>ASCII</code> 字母表进行排序。所以，如果将
<code>Locale</code> 设置为 <code>en_US.UTF-8</code>，底层操作系统不支持，数据库自然也不会支持按照这种编码排序了。</p>
<h2 id="gin-索引">GIN 索引</h2>
<p>实际上，使用 PostgreSQL 进行模糊搜索时，除了使用 Btree 索引，还可以使用 GIN 索引。</p>
<p>什么是 GIN 索引呢？</p>
<p>GIN，全称为通用倒排索引（Generalized Inverted Index）。倒排索引也被称为反向索引，被用来存储在全文搜索下某个单词在一个文档或者一组文档中的存储位置的映射。
也就是说，知道某个词，就可以知道这个词出现在文档的哪些位置。</p>
<p>在 GIN 中全文搜索的基本单元就是 <code>document</code>，在 GIN 中查询一个词，即查询出现这个词的所有 <code>document</code>。为了搜索方便，<code>document</code> 会被转化成一个特殊的类型：<code>tsvector</code>。</p>
<p><code>tsvector</code> 由 <code>lexemes</code>（语素） 和<code>lexemes</code> 出现在 <code>document</code> 中的位置组成。</p>
<p>这里出现的术语较多，举个例子就明白了：</p>
<pre><code>postgres=# select to_tsvector('There was a crooked man, and he walked a crooked mile');

to_tsvector
-----------------------------------------
 'crook':4,10 'man':5 'mile':11 'walk':8
(1 row)

</code></pre><p>上面的查询利用 PostgreSQL 自带的 <code>to_tsvector</code> 函数将一句话转换为了多个 <code>tsvector</code>。</p>
<p>在上面的例子中，<code>'crook':4,10</code> 为第一个 <code>tsvector</code>，第一部分为语素：crook，第二部分为出现的位置：句中的第 <code>4</code> 个和第 <code>10</code> 个单词的位置（下标从 <code>1</code> 开始），以此类推。</p>
<p>这里的停用词（&ldquo;there&rdquo;, &ldquo;was&rdquo;, &ldquo;a&rdquo;, &ldquo;and&rdquo;, &ldquo;he&rdquo;）全部被去掉（因为这些词出现的频率太高了，对于搜索起到的作用非常有限）。</p>
<p>其实看到这里，大家已经明白，将所有<strong>待搜索内容</strong>转换为 <code>tsvector</code>，其实就是一个预处理的过程，单纯是为了后面执行搜索方便。</p>
<p>待搜索内容要处理，要匹配的搜索内容当然也需要处理。</p>
<p>在 PostgreSQL 中，<code>tsquery</code> 表示搜索词。一般而言，<code>tsquery</code> 由 <code>lexemes</code> 加上一些特殊符号组成，如下：</p>
<pre><code>postgres=# select to_tsquery('man &amp; (walking | running)');

         to_tsquery
----------------------------
 'man' &amp; ( 'walk' | 'run' )
(1 row)
</code></pre><p>PostgreSQL 提供了丰富的关系符号，用于 tsquery 和 tsvector 的操作，这里仅列出其中一部分：</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>描述</th>
<th>例子</th>
</tr>
</thead>
<tbody>
<tr>
<td>@@</td>
<td>tsvector 匹配 tsquery</td>
<td>to_tsvector(&lsquo;fat cats ate rats&rsquo;) @@ to_tsquery(&lsquo;cat &amp; rat&rsquo;)</td>
</tr>
<tr>
<td>@&gt;</td>
<td>tsquery 包含另外一个 tsquery</td>
<td>&lsquo;cat&rsquo;::tsquery @&gt; &lsquo;cat &amp; rat&rsquo;::tsquery</td>
</tr>
<tr>
<td>&lt;@</td>
<td>tsquery 包含在另外一个 tsquery</td>
<td>&lsquo;cat&rsquo;::tsquery &lt;@ &lsquo;cat &amp; rat&rsquo;::tsquery</td>
</tr>
</tbody>
</table>
<p>对 GIN 索引更加详细的介绍，这里不再展开，只需要知道它是一个能够加快全文搜索的倒排索引即可。</p>
<p>我们马上对这个表建立 <code>GIN</code> 索引。</p>
<pre><code>CREATE EXTENSION pg_trgm; -- 需要依赖这个扩展
CREATE INDEX gin_index ON groups USING gin(name gin_trgm_ops);
</code></pre><p>再次执行查询：</p>
<pre><code>postgres=# explain analyze select * from groups where name like '%探探大%';
                                                     QUERY PLAN
---------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on groups  (cost=28.77..403.03 rows=100 width=69) (actual time=0.142..0.171 rows=1 loops=1)
   Recheck Cond: ((name)::text ~~ '%探探大%'::text)
   Rows Removed by Index Recheck: 1
   Heap Blocks: exact=2
   -&gt;  Bitmap Index Scan on gin_index  (cost=0.00..28.75 rows=100 width=0) (actual time=0.129..0.130 rows=2 loops=1)
         Index Cond: ((name)::text ~~ '%探探大%'::text)
 Planning Time: 0.165 ms
 Execution Time: 0.202 ms
(8 rows)

</code></pre><p>可以看出，通过建立 GIN 索引，前后模糊查询均已经支持走索引，执行时间较短，无需执行正反两次查询。但是更换索引结构，还是不能解决对 <code>Locale</code> 的强依赖问题。</p>
<pre><code>test=# explain analyze select * from groups where name like '探探大%';
                                                           QUERY PLAN
--------------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on groups  (cost=536.77..911.03 rows=100 width=69) (actual time=561.098..561.100 rows=0 loops=1)
   Recheck Cond: ((name)::text ~~ '探探大%'::text)
   Rows Removed by Index Recheck: 1000000
   Heap Blocks: exact=12346
   -&gt;  Bitmap Index Scan on gin_index  (cost=0.00..536.75 rows=100 width=0) (actual time=269.319..269.319 rows=1000000 loops=1)
         Index Cond: ((name)::text ~~ '探探大%'::text)
 Planning Time: 0.200 ms
 Execution Time: 561.157 ms
(8 rows)


test=# \l test
                        List of databases
 Name |  Owner   | Encoding | Collate | Ctype | Access privileges
------+----------+----------+---------+-------+-------------------
 test | postgres | UTF8     | C       | C     |
(1 row)
</code></pre><p>上面的例子说明：在 <code>LC_CTYPE</code> 为 <code>C</code> 时虽然走了索引，但是比全表查询还慢。再仔细看，大部分时间都耗在了 Recheck 上，说明，第一轮根据Bitmap 索引查询得到的结果，准确率很低。</p>
<p>前面的 Like 查询在 <code>LC_CTYPE</code> 不为 <code>C</code> 时不支持，这里的 GIN 索引当<code>LC_CTYPE</code> 为 <code>C</code> 时又比较慢，人生为何如此艰难？</p>
<p>问题有可能出现在了分词上。 好在 PostgreSQL 给出了一个调试函数 <code>show_trgm</code> 使用这个函数，可以测试分词结果。</p>
<pre><code>test=# select show_trgm('探探大群');
 show_trgm
-----------
 {}
(1 row)

test=# select show_trgm('tantanda');
                show_trgm
-----------------------------------------
 {&quot;  t&quot;,&quot; ta&quot;,and,ant,&quot;da &quot;,nda,nta,tan}
(1 row)

</code></pre><p>再使用一个 <code>Locale</code> 为 <code>en_US.UTF-8</code> 的数据库执行分词：</p>
<pre><code>postgres=&gt; \l+ postgres
                                                                      数据库列表
   名称   |  拥有者  | 字元编码 |  校对规则   |    Ctype    |       存取权限        |  大小  |   表空间   |                    描述
----------+----------+----------+-------------+-------------+-----------------------+--------+------------+--------------------------------------------
 postgres | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =Tc/postgres         +| 224 MB | pg_default | default administrative connection database
          |          |          |             |             | postgres=CTc/postgres+|        |            |
          |          |          |             |             | lixuehan=CTc/postgres |        |            |
(1 行记录)


postgres=&gt; select show_trgm('探探大群');
                   show_trgm
------------------------------------------------
 {0x98caf4,0xe3fef2,0xfcd2fa,0xff676b,0x4cb10e}


</code></pre><p>虽然添加了 <code>pg_trgm</code> 扩展插件，但是在 <code>LC_CTYPE</code> 非 <code>C</code> 时，分词函数并没有对中文生效，查询时即使走了索引，但在返回数据时进行的 <code>Recheck</code> 操作，耗费了太多时间，导致查询速度变慢。</p>
<p>再回到前面，我们在创建 GIN 索引时，先使用了 <code>pg_trgm</code> 这个扩展插件，这个插件是个什么东东呢？</p>
<p>还是得查看 PostgreSQL 官方的介绍：</p>
<blockquote>
<p>The pg_trgm module provides functions and operators for determining the similarity of ASCII alphanumeric text based on trigram matching,
as well as index operator classes that support fast searching for similar strings.</p>
</blockquote>
<p><code>pg_trgm</code> 模块提供函数和操作符来测定字母，数字，文本基于三元模型匹配的相似性， 还有支持快速搜索相似字符串的索引操作符类。</p>
<p>打个比方<code>foo</code>的三元模型的集合为：</p>
<p>[][]f、[]fo、foo、oo[]</p>
<p>这里用 [] 表示空，也就是说 <code>pg_trgm</code> 将字符串拆解成三个字符一组，如果不满三个，则用空格填充。</p>
<p>那么问题来了，如果我使用了 <code>pg_trgm</code> 扩展插件，且 <code>LC_CTYPE</code> 为 <code>en_US.UTF-8</code> ，是不是查询效率就一定高呢？</p>
<p>不然。</p>
<p>且看下面三个例子：</p>
<pre><code>postgres=# explain analyze select * from groups where name like '%探探大%';
                                                     QUERY PLAN
---------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on groups  (cost=28.77..403.03 rows=100 width=69) (actual time=0.066..0.111 rows=1 loops=1)
   Recheck Cond: ((name)::text ~~ '%探探大%'::text)
   Rows Removed by Index Recheck: 1
   Heap Blocks: exact=2
   -&gt;  Bitmap Index Scan on gin_index  (cost=0.00..28.75 rows=100 width=0) (actual time=0.049..0.050 rows=2 loops=1)
         Index Cond: ((name)::text ~~ '%探探大%'::text)
 Planning Time: 0.213 ms
 Execution Time: 0.149 ms
(8 rows)

postgres=# explain analyze select * from groups where name like '%探探%';
                                                       QUERY PLAN
-------------------------------------------------------------------------------------------------------------------------
 Gather  (cost=1000.00..18564.33 rows=100 width=69) (actual time=0.666..238.445 rows=1 loops=1)
   Workers Planned: 2
   Workers Launched: 2
   -&gt;  Parallel Seq Scan on groups  (cost=0.00..17554.33 rows=42 width=69) (actual time=146.700..225.407 rows=0 loops=3)
         Filter: ((name)::text ~~ '%探探%'::text)
         Rows Removed by Filter: 333333
 Planning Time: 0.152 ms
 Execution Time: 238.469 ms
(8 rows)

postgres=# explain analyze select * from groups where name like '%探%';
                                                       QUERY PLAN
-------------------------------------------------------------------------------------------------------------------------
 Gather  (cost=1000.00..18564.33 rows=100 width=69) (actual time=0.427..224.734 rows=980 loops=1)
   Workers Planned: 2
   Workers Launched: 2
   -&gt;  Parallel Seq Scan on groups  (cost=0.00..17554.33 rows=42 width=69) (actual time=1.493..207.726 rows=327 loops=3)
         Filter: ((name)::text ~~ '%探%'::text)
         Rows Removed by Filter: 333007
 Planning Time: 0.235 ms
 Execution Time: 224.913 ms
(8 rows)

</code></pre><p>上面的例子中，分别对待搜索字数为 <code>3</code> 个、 <code>2</code> 个、 <code>1</code> 个三种情况进行测试，发现关键词很短的情况（1-2汉字）的情况下召回率很差，无法走索引，只能进行全表扫，查询时间超过了 <code>200ms</code>。</p>
<h2 id="业务分词">业务分词</h2>
<p>从前面分析可知，使用 PostgreSQL 自带分词扩展插件存在以下不足：</p>
<p>1.关键词很短的情况（1-2汉字）的情况下召回率很差，特别是只有一个字时，是无法走索引的，只能进行全表扫。</p>
<p>2.定制性太差，只能使用它自己定义的逻辑来定义字符串的相似度</p>
<p>3.对 <code>LC_CTYPE</code> 有特殊的要求，可移植性较差 ，默认的 <code>LC_CTYPE</code> 无法正确对中文进行分词。</p>
<p>于是，我们决定在业务中使用分词。</p>
<p><img loading="lazy" src="/posts/pg/imgs/business_cut_words.png" type="" alt="分词架构"  /></p>
<ul>
<li>分词：在维护阶段，每一个被模糊搜索的字段（例如应用名称），在<strong>业务代码中使用分词包</strong>加工处理成一系列关键词。</li>
<li>索引：在数据库中建立关键词到表记录的倒排索引</li>
<li>查询：<strong>将查询同样拆解为关键词</strong>，然后利用查询关键词通过倒排索引找出相关的记录来。</li>
</ul>
<p>所以，我们打算采用业务代码分词 + PG查询的方式进行：</p>
<p><img loading="lazy" src="/posts/pg/imgs/search_update.png" type="" alt="搜索和查询架构"  /></p>
<ul>
<li>在业务表中新增一列，专门用来存放搜索列的分词结果</li>
<li>更新或者新插入记录时，在业务代码中进行分词，将分词结果，以 <code>tsvector</code> 的形式存储到新增列中</li>
<li>执行查询时，同样使用业务代码对待搜索内容进行分词，转换为 <code>tsquery</code> 形式，与 <code>tsvector</code> 进行匹配</li>
</ul>
<p>这样的好处：分词方法可以完全按照我们自己的定制的方案进行，如果后面需要支持拼音搜索、拼音首字母搜索等其他方式，在 DB 层面不需要更改，只需要更改业务代码中的分词逻辑即可。</p>
<h3 id="分词方案">分词方案</h3>
<p>常见的分词模式，主要分为：全模式、精确模式和单字模式三种。</p>
<p>以对「我来到了北京清华大学」这句话为例：</p>
<pre><code>
【全模式】: 我/ 来到/ 北京/ 清华/ 清华大学/ 华大/ 大学

【精确模式】: 我/ 来到/ 北京/ 清华大学

【单字模式】：我/ 来/ 到/ 北/ 京/ 清/ 华/ 大/ 学

【全模式+精确模式+单字模式】：我/ 来到/ 北京/ 清华/ 清华大学/ 华大/ 大学/ 我/ 来/ 到/ 北/ 京/ 清/ 华/ 大/ 学

</code></pre><p>上面的第四种模式，是在群聊业务中使用到的模式，在下面会介绍到。</p>
<p>群聊业务中根据业务使用场景的不同，采用了不同的分词模式进行：</p>
<p>在新增群或者群名变更时，由于对于群名要尽可能列举出来每一种分词的可能，所以采用了「全模式+精确模式+单字模式」结合的思路进行。</p>
<p>比如群名：「爱宠物的单身男女们」</p>
<p>使用分词包进行分词后，结果为：「爱、宠物、单身、男女」</p>
<p>这时，如果输入「女」进行查询，则由于在插入群数据时，没有对该群名分出来「女」这个语素，所以是无法查询出来的。</p>
<p>针对此缺陷，所以本次采用第四种的<strong>订制模式</strong>：「爱」「宠」「物」「的」「单」「身」「男」「女」「们」「宠物」「单身」「男女」。这样基本就把所有可能的模式尽可能列举出来了。</p>
<p>搜索群时对于用户输入的字符串采用了「分词模式」进行。</p>
<p>比如用户输入「女神经」，如果按照「全模式+分词模式」，结果就会为：「女」「神」「经」「神经」。</p>
<p>这样就会把所有只包含「女」或者「神」字的记录也查询出来，而只包含「神」的记录大概率是用户不想搜出来的，如果返回这些记录会让用户感觉莫名其妙，用户体验较差。</p>
<p>如果只采用「分词模式」，则会只搜索「女」或者「神经」，在体验上较好一些，匹配效率更高。</p>
<h3 id="分词包">分词包</h3>
<p>目前使用比较多的分词包主要有：gojieba 、 jiebago、sego、gse。</p>
<p>给定相同词典，大小为 9.2MB，让这四种分词包分别加载后，分析其指标（使用 pprof 方法分析）。</p>
<p>由于我们业务场景中使用的是对短句切分（不超过14个字），这几个包官方给出的分词效率都是 KB/s 级别，对于我们的使用场景，性能绰绰有余，所以我们重点放在了内存占用指标的对比上。</p>
<p>执行下面命令，查看这四个分词包内存情况：</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="k">go</span> <span class="nx">tool</span> <span class="nx">pprof</span> <span class="o">-</span><span class="nx">inuse_space</span> <span class="nx">http</span><span class="p">:</span><span class="c1">//127.0.0.1:6060/debug/pprof/heap
</span></code></pre></div><ol>
<li>
<p>gse 包</p>
<pre><code>(pprof) top
Showing nodes accounting for 116.65MB, 100% of 116.65MB total
Showing top 10 nodes out of 19
      flat  flat%   sum%        cum   cum%
   50.04MB 42.90% 42.90%    50.04MB 42.90%  github.com/go-ego/cedar.(*Cedar).addBlock
   33.11MB 28.38% 71.28%    83.15MB 71.28%  github.com/go-ego/gse.(*Dictionary).addToken
   28.50MB 24.43% 95.71%    28.50MB 24.43%  github.com/go-ego/gse.(*Segmenter).SplitTextToWords
       3MB  2.57% 98.29%   116.65MB   100%  github.com/go-ego/gse.(*Segmenter).Reader
       2MB  1.71%   100%        2MB  1.71%  fmt.(*ss).convertString
         0     0%   100%        2MB  1.71%  fmt.(*ss).doScan
         0     0%   100%        2MB  1.71%  fmt.(*ss).scanOne
         0     0%   100%        2MB  1.71%  fmt.Fscanln
         0     0%   100%    50.04MB 42.90%  github.com/go-ego/cedar.(*Cedar).Insert
         0     0%   100%    50.04MB 42.90%  github.com/go-ego/cedar.(*Cedar).findPlaces

</code></pre><p>内存占用为 <code>116.65MB</code>。</p>
</li>
<li>
<p>sego 包</p>
<pre><code>Type: inuse_space
Time: May 17, 2021 at 11:43am (CST)
Entering interactive mode (type &quot;help&quot; for commands, &quot;o&quot; for options)
(pprof) top
Showing nodes accounting for 122.61MB, 99.59% of 123.11MB total
Dropped 3 nodes (cum &lt;= 0.62MB)
Showing top 10 nodes out of 16
      flat  flat%   sum%        cum   cum%
   41.39MB 33.62% 33.62%    78.60MB 63.85%  github.com/huichen/sego.(*Dictionary).addToken
   36.71MB 29.82% 63.44%    36.71MB 29.82%  github.com/adamzy/cedar-go.(*cedar).addBlock
      33MB 26.81% 90.25%       33MB 26.81%  github.com/huichen/sego.splitTextToWords
    8.50MB  6.90% 97.16%   123.11MB   100%  github.com/huichen/sego.(*Segmenter).LoadDictionary
       3MB  2.44% 99.59%        3MB  2.44%  fmt.(*ss).convertString
         0     0% 99.59%        3MB  2.44%  fmt.(*ss).doScan
         0     0% 99.59%        3MB  2.44%  fmt.(*ss).scanOne
         0     0% 99.59%        3MB  2.44%  fmt.Fscanln
         0     0% 99.59%    36.71MB 29.82%  github.com/adamzy/cedar-go.(*Cedar).Insert
         0     0% 99.59%    36.71MB 29.82%  github.com/adamzy/cedar-go.(*cedar).findPlaces
</code></pre><p>内存占用 <code>123.11MB</code>。</p>
</li>
<li>
<p>jiebago</p>
<pre><code>Type: inuse_space
Time: May 17, 2021 at 11:38am (CST)
Entering interactive mode (type &quot;help&quot; for commands, &quot;o&quot; for options)
(pprof) top
Showing nodes accounting for 25.30MB, 100% of 25.30MB total
Showing top 10 nodes out of 11
      flat  flat%   sum%        cum   cum%
   21.72MB 85.84% 85.84%    21.72MB 85.84%  github.com/wangbin/jiebago.(*Dictionary).addToken
    2.58MB 10.21% 96.05%     2.58MB 10.21%  github.com/wangbin/jiebago/finalseg.init.0
       1MB  3.95%   100%        1MB  3.95%  bufio.(*Scanner).Text
         0     0%   100%    21.72MB 85.84%  github.com/wangbin/jiebago.(*Dictionary).Load
         0     0%   100%    21.72MB 85.84%  github.com/wangbin/jiebago.(*Dictionary).loadDictionary
         0     0%   100%    21.72MB 85.84%  github.com/wangbin/jiebago.(*Segmenter).LoadDictionary
         0     0%   100%    21.72MB 85.84%  github.com/wangbin/jiebago/dictionary.LoadDictionary
         0     0%   100%        1MB  3.95%  github.com/wangbin/jiebago/dictionary.loadDictionary.func1
         0     0%   100%    21.72MB 85.84%  my-project/src/tokens/jiebago.init.0
         0     0%   100%    24.30MB 96.05%  runtime.doInit
</code></pre><p>内存占用 <code>25.30MB</code>。</p>
</li>
<li>
<p>gojieba</p>
<pre><code>Type: inuse_space
Time: May 17, 2021 at 11:42am (CST)
Entering interactive mode (type &quot;help&quot; for commands, &quot;o&quot; for options)
(pprof) top
Showing nodes accounting for 520.04kB, 100% of 520.04kB total
      flat  flat%   sum%        cum   cum%
  520.04kB   100%   100%   520.04kB   100%  runtime/pprof.writeHeapInternal
         0     0%   100%   520.04kB   100%  net/http.(*ServeMux).ServeHTTP
         0     0%   100%   520.04kB   100%  net/http.(*conn).serve
         0     0%   100%   520.04kB   100%  net/http.HandlerFunc.ServeHTTP
         0     0%   100%   520.04kB   100%  net/http.serverHandler.ServeHTTP
         0     0%   100%   520.04kB   100%  net/http/pprof.Index
         0     0%   100%   520.04kB   100%  net/http/pprof.handler.ServeHTTP
         0     0%   100%   520.04kB   100%  runtime/pprof.(*Profile).WriteTo
         0     0%   100%   520.04kB   100%  runtime/pprof.writeHeap
</code></pre><p>总共占用内存约为 <code>520.04kB</code>。</p>
</li>
</ol>
<p>在占用内存方面：gojieba &lt; jiebago &lt; gse &lt; sego。</p>
<p>除此之外，也对比了一些其他方面的指标：</p>
<table>
<thead>
<tr>
<th>包名</th>
<th>维护情况（最近一次提交时间）</th>
<th>start 数</th>
<th>contributor 数</th>
<th>自带分词库大小</th>
<th>不足</th>
<th>亮点</th>
</tr>
</thead>
<tbody>
<tr>
<td>gojieba</td>
<td>2020年1月</td>
<td>1.4k</td>
<td>11</td>
<td>11M</td>
<td>1.不支持 mac 开发环境交叉编译 2.有issues提到在并发情况下会panic，亲测无此问题 3.底层使用 C++ 实现分词算法，通过 cgo 调用实现，测试环境由于缺少 g++ 执行文件，构建失败，对于环境依赖性较高。</td>
<td>号称是国内使用人数最多的 go 语言分词库</td>
</tr>
<tr>
<td>jiebago</td>
<td>2015年5月</td>
<td>358</td>
<td>1</td>
<td>5.1M</td>
<td>维护活跃度低，基本不维护了。</td>
<td></td>
</tr>
<tr>
<td>sego</td>
<td>2018年6月</td>
<td>1.5k</td>
<td>6</td>
<td>8.6M</td>
<td>仓库中给出的demo分词效果较差（“中华人民共和国”分为了7个字），代码风格较差，log.fatalf panic 满天飞</td>
<td>作者为前 Google 大佬，对 go 和分词熟悉</td>
</tr>
<tr>
<td>gse</td>
<td>2021年3月</td>
<td>1.6k</td>
<td>4</td>
<td>14M</td>
<td>加载自带的分词库占用内存较大。</td>
<td>代码风格较好，注释较为详尽</td>
</tr>
</tbody>
</table>
<p>综合前面的对照表，可知每种包都有各自的优缺点，代码质量也良莠不齐。</p>
<p>维护情况：jiebago &lt; sego &lt; gojieba &lt; gse</p>
<p>star 数：jiebago &lt; gojieba &lt; sego &lt; gse</p>
<p>综合考虑以上因素，选择了对于代码更具掌控性的 gse 作为分词包，虽然内存占用较大，但是如果单独抽象出来一个公共服务，专门提供分词能力，不影响核心服务即可。</p>
<h2 id="倒排">倒排</h2>
<p>如前所述，我们再业务表中新增一列存储分词结果：<code>group_name_tokens</code>。</p>
<p>PostgreSQL 官方文档推荐两种方法建立索引：</p>
<p>1）直接对 <code>group_name_tokens</code> 建立函数索引，比如：</p>
<pre><code>CREATE INDEX group_idx ON groups USING GIN (to_tsvector(config_name, body));--to_tsvector 是PG内置的函数
</code></pre><p>2）直接将该列设置为 <code>tsvector</code> 类型，直接对 <code>tsvector</code> 类型列建立索引。</p>
<pre><code>ALTER TABLE groups ADD column group_name_tokens tsvector;
</code></pre><p>我们选择方案2，出于以下考虑：</p>
<p>方案1，建立索引更简单一些，占用磁盘空间更小，因为 tsvector 并没有显式存储，但是每次查询都需要重新执行计算 <code>to_tsvector</code> 值，速度较慢;</p>
<p>方案2，利用索引查询时，无需指定全文索引的配置（全文索引有一些跟 <code>Locale</code> 相关的配置），另外，由于在验证索引匹配时，无需重新计算 <code>to_tsvector</code> 值，所以查询速度更快。</p>
<p>在群聊业务场景下，考虑到群的数量可控，所以占用空间不会增加太多，同时用户对于搜索速度的体验要求更高，所以采用了方案2。</p>
<p>如果要对搜索结果按照相似度排序呢？</p>
<h3 id="similarity">similarity</h3>
<p>这个是在 <code>pg_trgm</code> 扩展中包含的函数，其对中文分词支持不佳，所以业务中不采用。</p>
<h3 id="最小编辑距离">最小编辑距离</h3>
<p>最小编辑距离，需要使用到 PostgreSQL 的扩展：</p>
<pre><code>CREATE EXTENSION fuzzystrmatch;---依赖该扩展为搜索结果排序
</code></pre><p>levenshtein 函数的一些相关 API：</p>
<pre><code>levenshtein(text source, text target, int ins_cost, int del_cost, int sub_cost) returns int
levenshtein(text source, text target) returns int
levenshtein_less_equal(text source, text target, int ins_cost, int del_cost, int sub_cost, int max_d) returns int
levenshtein_less_equal(text source, text target, int max_d) returns int
</code></pre><p>官方文档对 <code>source</code>  和  <code>target</code> 参数给出限制：不能超过 <code>255</code> 字节（由于群名称有长度限制，故适合我们的业务使用场景）。</p>
<p><code>cost</code> 参数分别指定了对于一个字符的插入、删除和代替的代价，个人理解，一定程度上就是字符串的这三种改变带来的权重。</p>
<p>分别举几个例子就明白了：</p>
<ol>
<li>
<p>插入</p>
<p><code>GUMBO</code> 和 <code>GUMBOL</code>，后者相比前者，等价于插入了一个 <code>L</code> 字符。所以，影响最终结果的，只有 <code>ins_cost</code> 参数。</p>
<pre><code>--- 设置为 0，表示插入新字符带来的代价不影响
lixuehan=# SELECT levenshtein('GUMBO', 'GUMBOL',0,1,1);
 levenshtein
-------------
           0
(1 row)

--- 设置为 1，表示插入新字符带来的代价为 1
lixuehan=# SELECT levenshtein('GUMBO', 'GUMBOL',1,1,1);
 levenshtein
-------------
           1
(1 row)
</code></pre></li>
<li>
<p>删除</p>
<p><code>GUMBO</code> 和 <code>GUMO</code>，后者相比前者，等价于删除了一个 <code>B</code> 字符。所以，影响最终比较结果的只有 <code>del_cost</code> 参数。</p>
<pre><code>--- 设置为 0，表示插入新字符带来的代价不影响
lixuehan=# SELECT levenshtein('GUMBO', 'GUMO',1,0,1);
 levenshtein
-------------
           0
(1 row)

--- 设置为 1，表示插入新字符带来的代价为 1
lixuehan=# SELECT levenshtein('GUMBO', 'GUMO',1,1,1);
 levenshtein
-------------
           1
(1 row)
</code></pre></li>
<li>
<p>代替</p>
<p><code>GUMBO</code> 和 <code>GUMLO</code>，后者相比前者，等价于将 <code>B</code> 字符替换为 <code>L</code> 字符。所以，影响最终比较结果的只有 <code>sub_cost</code> 参数。</p>
<pre><code>--- 设置为 0，表示插入新字符带来的代价不影响
lixuehan=# SELECT levenshtein('GUMBO', 'GUMLO',1,1,0);
 levenshtein
-------------
           0
(1 row)

--- 设置为 1，表示插入新字符带来的代价为 1
lixuehan=# SELECT levenshtein('GUMBO', 'GUMLO',1,1,1);
 levenshtein
-------------
           1
(1 row)
</code></pre></li>
</ol>
<p>在实际的使用中，我们可以通过确定字符串这三种不同改变带来的权重来影响实际的比较结果。</p>
<p><code>levenshtein_less_equal</code> 函数是一个加速版的 <code>levenshtein</code>。如果 <code>levenshtein</code> 距离大于 <code>max_id</code> ，则返回 <code>levenshtein</code> 距离值，反之，则返回 <code>max_id+1</code>。</p>
<pre><code>--- levenshtein 距离 ---
lixuehan=# select levenshtein('extensive', 'exhaustive');
 levenshtein
-------------
           4
(1 row)

--- max_id 为 2，时返回 3 ---
lixuehan=# SELECT levenshtein_less_equal('extensive', 'exhaustive',2);
 levenshtein_less_equal
------------------------
                      3
(1 row)

--- max_id 为 1，时返回 2 ---
lixuehan=# SELECT levenshtein_less_equal('extensive', 'exhaustive',1);
 levenshtein_less_equal
------------------------
                      2
(1 row)

--- max_id 大于 levenshtein 值时，返回真正的 levenshtein 距离 ---
lixuehan=# SELECT levenshtein_less_equal('extensive', 'exhaustive',7);
 levenshtein_less_equal
------------------------
                      4
(1 row)
</code></pre><p>在我们的群搜索业务场景中，采取了简单的第二种 api ：</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="n">levenshtein</span><span class="p">(</span><span class="n">text</span> <span class="n">source</span><span class="p">,</span> <span class="n">text</span> <span class="n">target</span><span class="p">)</span> <span class="n">returns</span> <span class="kt">int</span>
</code></pre></div><p>这种情况下，三种case带来的影响都默认是 1.</p>
<p>更多介绍参见 <a href="https://www.postgresql.org/docs/9.1/fuzzystrmatch.html">官方文档</a>。</p>
<p>使用方式比较直观：</p>
<pre><code>SELECT id,levenshtein(name,?) AS distance FROM groups WHERE group_name_tokens @@ to_tsquery('探探') ORDER BY distance ASC
</code></pre><h2 id="上线优化效果">上线优化效果</h2>
<p>利用分词+倒排的方案，实现了搜索功能与 PostgreSQL 的 <code>Locale_Ctype</code> 彻底解耦，同时提供了相似度排名特性，同时加快了搜索的速度，提升了性能，下面两张图就是上线前后的对比：</p>
<p><img loading="lazy" src="/posts/pg/imgs/compare.png" type="" alt=""  /></p>
<p>上线前后对比</p>
<p>优化上线前，搜索查询最长耗时 <code>22.2ms</code>，最短耗时 <code>440us</code>，平均耗时：<code>6.6ms</code>。</p>
<p>优化上线后，最短耗时：<code>456us</code>，最长耗时：<code>14ms</code>，平均耗时：<code>1.7ms</code>。</p>
<p>与之前的 Like 查询相比，最长耗时比原来少了 <code>2ms</code>，平均耗时缩短为原来的 <code>1/4</code>，提升效果显著。</p>
<h2 id="最后">最后</h2>
<p>下面是在实现需求时的一些参考链接，有兴趣可以点击链接详读，文章中有错误之处，恳请大家批评指针。</p>
<ol>
<li><a href="https://github.com/digoal/blog/blob/master/201704/20170426_01.md">https://github.com/digoal/blog/blob/master/201704/20170426_01.md</a></li>
<li><a href="https://www.postgresql.org/docs/13/locale.html">https://www.postgresql.org/docs/13/locale.html</a></li>
<li><a href="http://pigsty.cc/zh/blog/2021/03/05/pg%E4%B8%AD%E7%9A%84%E6%9C%AC%E5%9C%B0%E5%8C%96%E6%8E%92%E5%BA%8F%E8%A7%84%E5%88%99/">http://pigsty.cc/zh/blog/2021/03/05/pg中的本地化排序规则/</a></li>
<li><a href="https://postgrespro.com/blog/pgsql/4261647">Indexes in PostgreSQL</a></li>
<li><a href="https://postgrespro.com/blog/pgsql/4261647">https://postgrespro.com/blog/pgsql/4261647</a></li>
</ol>
]]></content:encoded>
    </item>
    
    <item>
      <title>Icons</title>
      <link>https://anriclee.github.io/docs/icons/</link>
      <pubDate>Wed, 20 Jan 2021 00:00:00 +0000</pubDate>
      
      <guid>https://anriclee.github.io/docs/icons/</guid>
      <description>Explain how to use icons in PaperModX</description>
      <content:encoded><![CDATA[<h2 id="social-icons">Social Icons</h2>
<p>Go to <a href="icons_preview">Icons Preview</a> to see a complete list of icons</p>
<p>Usage :</p>
<pre><code>socialIcons:
    - name: &quot;kofi&quot;
        url: &quot;https://kofi.com&quot;
    - name: &quot;twitter&quot;
        url: &quot;https://twitter.com&quot;
</code></pre><hr>
<h2 id="share-icons">Share Icons</h2>
<table>
<thead>
<tr>
<th>No.</th>
<th>Platform</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>twitter</code> (also generates hash tags from tags linked with post)</td>
</tr>
<tr>
<td>2</td>
<td><code>linkedin</code></td>
</tr>
<tr>
<td>3</td>
<td><code>reddit</code></td>
</tr>
<tr>
<td>4</td>
<td><code>facebook</code></td>
</tr>
<tr>
<td>5</td>
<td><code>whatsapp</code></td>
</tr>
<tr>
<td>6</td>
<td><code>telegram</code></td>
</tr>
</tbody>
</table>
<p>Usage:</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">params</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">ShowShareButtons</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></code></pre></div>]]></content:encoded>
    </item>
    
    <item>
      <title>Installation | Update</title>
      <link>https://anriclee.github.io/docs/installation/</link>
      <pubDate>Wed, 20 Jan 2021 00:00:00 +0000</pubDate>
      
      <guid>https://anriclee.github.io/docs/installation/</guid>
      <description>Read Install and Update instructions here</description>
      <content:encoded><![CDATA[<h2 id="intro">Intro</h2>
<ul>
<li><strong>We&rsquo;ll be using <code>yml/yaml</code> format for all examples down below, I recommend using <code>yml</code> over <code>toml</code> as it is easier to read.</strong></li>
<li>You can find any <a href="https://www.google.com/search?q=yml+to+toml">YML to TOML</a> converters if necessary.</li>
</ul>
<hr>
<h2 id="guide">Guide</h2>
<p>Follow <a href="https://gohugo.io/getting-started/quick-start/">Quick Start</a> guide to setup hugo and create a new site.</p>
<blockquote>
<p>Note: Use -f to select yml format</p>
<p><code>hugo new site &lt;name of site&gt; -f yml</code></p>
</blockquote>
<p>Make sure you install latest version of <strong><code>hugo(&gt;=0.83.0)</code></strong>.</p>
<p>After you have created a new site, at <a href="https://gohugo.io/getting-started/quick-start/#step-3-add-a-theme">Step 3</a> follow the steps:</p>
<h3 id="method-1">Method 1</h3>
<p>Inside the folder of your Hugo site, run:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">git clone https://github.com/reorx/hugo-PaperModX themes/PaperModX --depth<span class="o">=</span><span class="m">1</span>
</code></pre></div><p><strong>Note</strong>: You may use <code> --branch v5.0</code> to end of above command if you want to stick to specific release.</p>
<blockquote>
<p>Updating theme :</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> themes/PaperModX
git pull
</code></pre></div></blockquote>
<h3 id="method-2">Method 2</h3>
<p>You can use as <a href="https://www.atlassian.com/git/tutorials/git-submodule">submodule</a> with</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">git submodule add https://github.com/reorx/hugo-PaperModX.git themes/PaperModX --depth<span class="o">=</span><span class="m">1</span>
git submodule update --init --recursive <span class="c1"># needed when you reclone your repo (submodules may not get cloned automatically)</span>
</code></pre></div><p><strong>Note</strong>: You may use <code> --branch v5.0</code> to end of above command if you want to stick to specific release.</p>
<blockquote>
<p>Updating theme :</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">git submodule update --remote --merge
</code></pre></div></blockquote>
<h3 id="method-3">Method 3</h3>
<p>Or you can Download as Zip from Github Page and extract in your themes directory</p>
<p>Direct Links:</p>
<ul>
<li><a href="https://github.com/reorx/hugo-PaperModX/archive/master.zip">Master Branch (Latest)</a></li>
<li><a href="https://github.com/reorx/hugo-PaperModX/archive/v5.0.zip">v5.0</a></li>
<li><a href="https://github.com/reorx/hugo-PaperModX/archive/v4.0.zip">v4.0</a></li>
<li><a href="https://github.com/reorx/hugo-PaperModX/archive/v3.0.zip">v3.0</a></li>
<li><a href="https://github.com/reorx/hugo-PaperModX/archive/v2.0.zip">v2.0</a></li>
<li><a href="https://github.com/reorx/hugo-PaperModX/archive/v1.0.zip">v1.0</a></li>
</ul>
<h3 id="finally-">Finally &hellip;</h3>
<p>Add in <code>config.yml</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">theme</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;PaperModX&#34;</span><span class="w">
</span></code></pre></div><h3 id="method-4">Method 4</h3>
<ul>
<li>
<p>Install <a href="https://go.dev/doc/install">Go programming language</a> in your operating system.</p>
</li>
<li>
<p>Intialize your own hugo mod</p>
</li>
</ul>
<pre><code>hugo mod init YOUR_OWN_GIT_REPOSITORY
</code></pre><ul>
<li>Add PaperModX in your <code>config.yml</code> file</li>
</ul>
<pre><code>module:
  imports:
  - path: github.com/reorx/hugo-PaperModX
</code></pre><ul>
<li>Update theme</li>
</ul>
<pre><code>hugo mod get -u
</code></pre><hr>
<h2 id="quick-links">Quick Links</h2>
<ul>
<li>
<h3 id="papermod---featuresfeatures"><a href="../features">Papermod - Features</a></h3>
</li>
<li>
<h3 id="papermod---faqsfaq"><a href="../faq">Papermod - FAQs</a></h3>
</li>
<li>
<h3 id="papermod---variablesvariables"><a href="../variables">Papermod - Variables</a></h3>
</li>
<li>
<h3 id="papermod---iconsicons"><a href="../icons">Papermod - Icons</a></h3>
</li>
<li>
<h3 id="changeloghttpsgithubcomreorxhugo-papermodxreleases"><a href="https://github.com/reorx/hugo-PaperModX/releases">ChangeLog</a></h3>
</li>
</ul>
<hr>
<h2 id="sample-configyml">Sample <code>config.yml</code></h2>
<blockquote>
<p><strong>Example Site Structure is present here</strong>: <a href="https://github.com/reorx/hugo-PaperModX/tree/exampleSite/">exampleSite</a></p>
</blockquote>
<p><strong>Use appropriately</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">baseURL</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://examplesite.com/&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">ExampleSite</span><span class="w">
</span><span class="w"></span><span class="nt">paginate</span><span class="p">:</span><span class="w"> </span><span class="m">5</span><span class="w">
</span><span class="w"></span><span class="nt">theme</span><span class="p">:</span><span class="w"> </span><span class="l">PaperModX</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="nt">enableRobotsTXT</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w"></span><span class="nt">buildDrafts</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w"></span><span class="nt">buildFuture</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w"></span><span class="nt">buildExpired</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w"></span><span class="nt">pygmentsUseClasses</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="nt">googleAnalytics</span><span class="p">:</span><span class="w"> </span><span class="l">UA-123-45</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="nt">minify</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">disableXML</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">    </span><span class="nt">minifyOutput</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="nt">params</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">env</span><span class="p">:</span><span class="w"> </span><span class="l">production</span><span class="w"> </span><span class="c"># to enable google analytics, opengraph, twitter-cards and schema.</span><span class="w">
</span><span class="w">    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">ExampleSite</span><span class="w">
</span><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;ExampleSite description&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">keywords</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">Blog, Portfolio, PaperModX]</span><span class="w">
</span><span class="w">    </span><span class="nt">author</span><span class="p">:</span><span class="w"> </span><span class="l">Me</span><span class="w">
</span><span class="w">    </span><span class="c"># author: [&#34;Me&#34;, &#34;You&#34;] # multiple authors</span><span class="w">
</span><span class="w">    </span><span class="nt">images</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;&lt;link or path of image for opengraph, twitter-cards&gt;&#34;</span><span class="p">]</span><span class="w">
</span><span class="w">    </span><span class="nt">DateFormat</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;January 2, 2006&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">defaultTheme</span><span class="p">:</span><span class="w"> </span><span class="l">auto</span><span class="w"> </span><span class="c"># dark, light</span><span class="w">
</span><span class="w">    </span><span class="nt">disableThemeToggle</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="nt">ShowReadingTime</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">    </span><span class="nt">ShowShareButtons</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">    </span><span class="nt">ShowPostNavLinks</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">    </span><span class="nt">ShowBreadCrumbs</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">    </span><span class="nt">ShowCodeCopyButtons</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">    </span><span class="nt">disableSpecial1stPost</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">    </span><span class="nt">disableScrollToTop</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">    </span><span class="nt">comments</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">    </span><span class="nt">hidemeta</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">    </span><span class="nt">hideSummary</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">    </span><span class="nt">showtoc</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">    </span><span class="nt">tocopen</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="nt">assets</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="c"># disableFingerprinting: true</span><span class="w">
</span><span class="w">        </span><span class="nt">favicon</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;link / abs url&gt;&#34;</span><span class="w">
</span><span class="w">        </span><span class="nt">favicon16x16</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;link / abs url&gt;&#34;</span><span class="w">
</span><span class="w">        </span><span class="nt">favicon32x32</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;link / abs url&gt;&#34;</span><span class="w">
</span><span class="w">        </span><span class="nt">apple_touch_icon</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;link / abs url&gt;&#34;</span><span class="w">
</span><span class="w">        </span><span class="nt">safari_pinned_tab</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;link / abs url&gt;&#34;</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="nt">label</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">text</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Home&#34;</span><span class="w">
</span><span class="w">        </span><span class="nt">icon</span><span class="p">:</span><span class="w"> </span><span class="l">/apple-touch-icon.png</span><span class="w">
</span><span class="w">        </span><span class="nt">iconHeight</span><span class="p">:</span><span class="w"> </span><span class="m">35</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="c"># profile-mode</span><span class="w">
</span><span class="w">    </span><span class="nt">profileMode</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c"># needs to be explicitly set</span><span class="w">
</span><span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">ExampleSite</span><span class="w">
</span><span class="w">        </span><span class="nt">subtitle</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;This is subtitle&#34;</span><span class="w">
</span><span class="w">        </span><span class="nt">imageUrl</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;img location&gt;&#34;</span><span class="w">
</span><span class="w">        </span><span class="nt">imageWidth</span><span class="p">:</span><span class="w"> </span><span class="m">120</span><span class="w">
</span><span class="w">        </span><span class="nt">imageHeight</span><span class="p">:</span><span class="w"> </span><span class="m">120</span><span class="w">
</span><span class="w">        </span><span class="nt">imageTitle</span><span class="p">:</span><span class="w"> </span><span class="l">my image</span><span class="w">
</span><span class="w">        </span><span class="nt">buttons</span><span class="p">:</span><span class="w">
</span><span class="w">            </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Posts</span><span class="w">
</span><span class="w">              </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">posts</span><span class="w">
</span><span class="w">            </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Tags</span><span class="w">
</span><span class="w">              </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">tags</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="c"># home-info mode</span><span class="w">
</span><span class="w">    </span><span class="nt">homeInfoParams</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">Title</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Hi there \U0001F44B&#34;</span><span class="w">
</span><span class="w">        </span><span class="nt">Content</span><span class="p">:</span><span class="w"> </span><span class="l">Welcome to my blog</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="nt">socialIcons</span><span class="p">:</span><span class="w">
</span><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">twitter</span><span class="w">
</span><span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://twitter.com/&#34;</span><span class="w">
</span><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">stackoverflow</span><span class="w">
</span><span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://stackoverflow.com&#34;</span><span class="w">
</span><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">github</span><span class="w">
</span><span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://github.com/&#34;</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="nt">analytics</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">google</span><span class="p">:</span><span class="w">
</span><span class="w">            </span><span class="nt">SiteVerificationTag</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;XYZabc&#34;</span><span class="w">
</span><span class="w">        </span><span class="nt">bing</span><span class="p">:</span><span class="w">
</span><span class="w">            </span><span class="nt">SiteVerificationTag</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;XYZabc&#34;</span><span class="w">
</span><span class="w">        </span><span class="nt">yandex</span><span class="p">:</span><span class="w">
</span><span class="w">            </span><span class="nt">SiteVerificationTag</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;XYZabc&#34;</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="nt">cover</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">hidden</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># hide everywhere but not in structured data</span><span class="w">
</span><span class="w">        </span><span class="nt">hiddenInList</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># hide on list pages and home</span><span class="w">
</span><span class="w">        </span><span class="nt">hiddenInSingle</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># hide on single page</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="nt">editPost</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">URL</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://github.com/&lt;path_to_repo&gt;/content&#34;</span><span class="w">
</span><span class="w">        </span><span class="nt">Text</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Suggest Changes&#34;</span><span class="w"> </span><span class="c"># edit text</span><span class="w">
</span><span class="w">        </span><span class="nt">appendFilePath</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># to append file path to Edit link</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="c"># for search</span><span class="w">
</span><span class="w">    </span><span class="c"># https://fusejs.io/api/options.html</span><span class="w">
</span><span class="w">    </span><span class="nt">fuseOpts</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">isCaseSensitive</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">        </span><span class="nt">shouldSort</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">        </span><span class="nt">location</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w">
</span><span class="w">        </span><span class="nt">distance</span><span class="p">:</span><span class="w"> </span><span class="m">1000</span><span class="w">
</span><span class="w">        </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="m">0.4</span><span class="w">
</span><span class="w">        </span><span class="nt">minMatchCharLength</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w">
</span><span class="w">        </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;title&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;permalink&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;summary&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;content&#34;</span><span class="p">]</span><span class="w">
</span><span class="w"></span><span class="nt">menu</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">main</span><span class="p">:</span><span class="w">
</span><span class="w">        </span>- <span class="nt">identifier</span><span class="p">:</span><span class="w"> </span><span class="l">categories</span><span class="w">
</span><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">categories</span><span class="w">
</span><span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">/categories/</span><span class="w">
</span><span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">10</span><span class="w">
</span><span class="w">        </span>- <span class="nt">identifier</span><span class="p">:</span><span class="w"> </span><span class="l">tags</span><span class="w">
</span><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">tags</span><span class="w">
</span><span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">/tags/</span><span class="w">
</span><span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">20</span><span class="w">
</span><span class="w">        </span>- <span class="nt">identifier</span><span class="p">:</span><span class="w"> </span><span class="l">example</span><span class="w">
</span><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">example.org</span><span class="w">
</span><span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">https://example.org</span><span class="w">
</span><span class="w">          </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="m">30</span><span class="w">
</span><span class="w"></span><span class="c"># Read: https://github.com/reorx/hugo-PaperModX/wiki/FAQs#using-hugos-syntax-highlighter-chroma</span><span class="w">
</span><span class="w"></span><span class="c"># pygmentsUseClasses: true</span><span class="w">
</span><span class="w"></span><span class="c"># markup:</span><span class="w">
</span><span class="w"></span><span class="c">#     highlight:</span><span class="w">
</span><span class="w"></span><span class="c">#         # anchorLineNos: true</span><span class="w">
</span><span class="w"></span><span class="c">#         codeFences: true</span><span class="w">
</span><span class="w"></span><span class="c">#         guessSyntax: true</span><span class="w">
</span><span class="w"></span><span class="c">#         lineNos: true</span><span class="w">
</span><span class="w"></span><span class="c">#         style: monokai</span><span class="w">
</span></code></pre></div><hr>
<h2 id="sample-pagemd">Sample <code>Page.md</code></h2>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;My 1st post&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">date</span><span class="p">:</span><span class="w"> </span><span class="ld">2020-09-15T11:30:03</span><span class="m">+00</span><span class="p">:</span><span class="m">00</span><span class="w">
</span><span class="w"></span><span class="c"># weight: 1</span><span class="w">
</span><span class="w"></span><span class="c"># aliases: [&#34;/first&#34;]</span><span class="w">
</span><span class="w"></span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;first&#34;</span><span class="p">]</span><span class="w">
</span><span class="w"></span><span class="nt">author</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Me&#34;</span><span class="w">
</span><span class="w"></span><span class="c"># author: [&#34;Me&#34;, &#34;You&#34;] # multiple authors</span><span class="w">
</span><span class="w"></span><span class="nt">showToc</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w"></span><span class="nt">TocOpen</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w"></span><span class="nt">draft</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w"></span><span class="nt">hidemeta</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w"></span><span class="nt">comments</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w"></span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Desc Text.&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">canonicalURL</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://canonical.url/to/page&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">disableShare</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w"></span><span class="nt">hideSummary</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w"></span><span class="nt">searchHidden</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w"></span><span class="nt">ShowReadingTime</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w"></span><span class="nt">ShowBreadCrumbs</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w"></span><span class="nt">ShowPostNavLinks</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w"></span><span class="nt">cover</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;image path/url&gt;&#34;</span><span class="w"> </span><span class="c"># image path/url</span><span class="w">
</span><span class="w">    </span><span class="nt">alt</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;alt text&gt;&#34;</span><span class="w"> </span><span class="c"># alt text</span><span class="w">
</span><span class="w">    </span><span class="nt">caption</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;text&gt;&#34;</span><span class="w"> </span><span class="c"># display caption under cover</span><span class="w">
</span><span class="w">    </span><span class="nt">relative</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c"># when using page bundles set this to true</span><span class="w">
</span><span class="w">    </span><span class="nt">hidden</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># only hide on current single page</span><span class="w">
</span><span class="w"></span><span class="nt">editPost</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">URL</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://github.com/&lt;path_to_repo&gt;/content&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">Text</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Suggest Changes&#34;</span><span class="w"> </span><span class="c"># edit text</span><span class="w">
</span><span class="w">    </span><span class="nt">appendFilePath</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># to append file path to Edit link</span><span class="w">
</span><span class="w"></span><span class="nn">---</span><span class="w">
</span></code></pre></div><p>You can use it by creating <code>archetypes/post.md</code></p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">hugo new --kind post &lt;name&gt;
</code></pre></div><hr>
]]></content:encoded>
    </item>
    
    <item>
      <title>PaperMod Features</title>
      <link>https://anriclee.github.io/docs/features/</link>
      <pubDate>Wed, 20 Jan 2021 00:00:00 +0000</pubDate>
      
      <guid>https://anriclee.github.io/docs/features/</guid>
      <description>Learn About All Features in original PaperMod</description>
      <content:encoded><![CDATA[<blockquote>
<p>source: <a href="https://adityatelange.github.io/hugo-PaperMod/posts/papermod/papermod-features/">https://adityatelange.github.io/hugo-PaperMod/posts/papermod/papermod-features/</a></p>
</blockquote>
<h3 id="intro">Intro</h3>
<ul>
<li>
<p><strong>We&rsquo;ll be using <code>yml/yaml</code> format for all examples down below, I recommend using <code>yml</code> over <code>toml</code> as it is easier to read.</strong></p>
</li>
<li>
<p>You can find any <a href="https://www.google.com/search?q=yml+to+toml">YML to TOML</a> converters if necessary.</p>
</li>
</ul>
<hr>
<h3 id="assets-jscss">Assets (js/css)</h3>
<p>The following is enabled by default</p>
<ul>
<li><a href="https://gohugo.io/hugo-pipes/minification/">minification</a> - makes the assets size smallest as possible.</li>
<li><a href="https://gohugo.io/hugo-pipes/bundling/">bundling</a> - bundles all the styles in one single asset</li>
<li><a href="https://gohugo.io/hugo-pipes/fingerprint/">fingerprint/integrity</a> check.</li>
</ul>
<hr>
<h3 id="default-theme-lightdarkauto">Default Theme light/dark/auto</h3>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">params</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="c"># defaultTheme: light</span><span class="w">
</span><span class="w">    </span><span class="c"># defaultTheme: dark</span><span class="w">
</span><span class="w">    </span><span class="nt">defaultTheme</span><span class="p">:</span><span class="w"> </span><span class="l">auto</span><span class="w"> </span><span class="c"># to switch between dark or light according to browser theme</span><span class="w">
</span></code></pre></div></details>
<hr>
<h3 id="theme-switch-toggle-enabled-by-default">Theme Switch Toggle (enabled by default)</h3>
<p>Shows icon besides title of page to change theme</p>
<p>To disable it :</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">disableThemeToggle</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></code></pre></div><p>You can refer following table for better understanding&hellip;</p>
<table>
<thead>
<tr>
<th><code>defaultTheme</code></th>
<th><code>disableThemeToggle</code></th>
<th>checks local storage?</th>
<th>checks system theme?</th>
<th>Info</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>auto</code></td>
<td>true</td>
<td>No</td>
<td>Yes</td>
<td>only system theme</td>
</tr>
<tr>
<td></td>
<td>false</td>
<td>Yes (if not-&gt;2)</td>
<td>Yes (2)</td>
<td><em>switch present</em></td>
</tr>
<tr>
<td><code>dark</code></td>
<td>true</td>
<td>No</td>
<td>No</td>
<td>force dark only</td>
</tr>
<tr>
<td></td>
<td>false</td>
<td>Yes</td>
<td>No</td>
<td><em>switch present</em></td>
</tr>
<tr>
<td><code>light</code></td>
<td>true</td>
<td>No</td>
<td>No</td>
<td>force light only</td>
</tr>
<tr>
<td></td>
<td>false</td>
<td>Yes</td>
<td>No</td>
<td><em>switch present</em></td>
</tr>
</tbody>
</table>
<hr>
<h3 id="archives-layout">Archives Layout</h3>
<p>Create a page with <code>archive.md</code> in <code>content</code> directory with following content</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">.
├── config.yml
├── content/
│   ├── archives.md   &lt;--- Create archive.md here
│   └── posts/
├── static/
└── themes/
    └── PaperModX/
</code></pre></div><p>and add the following to it</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Archive&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">layout</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;archives&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/archives/&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="l">archives</span><span class="w">
</span><span class="w"></span><span class="nn">---</span><span class="w">
</span><span class="w">
</span></code></pre></div><p><strong>Note:</strong> Archives Layout does not support Multilingual Month Translations.</p>
<hr>
<h3 id="regular-mode-default-mode">Regular Mode (default-mode)</h3>
<p><img loading="lazy" src="/docs/features/images/regular.jpg" type="" alt="regular"  /></p>
<hr>
<h3 id="home-info-mode">Home-Info Mode</h3>
<p><img loading="lazy" src="/docs/features/images/homeinfo.jpg" type="" alt="homeinfo"  /></p>
<p>Use 1st entry as some Information</p>
<p>add following to config file</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">params</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">homeInfoParams</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">Title</span><span class="p">:</span><span class="w"> </span><span class="l">Hi there wave</span><span class="w">
</span><span class="w">        </span><span class="nt">Content</span><span class="p">:</span><span class="w"> </span><span class="l">Can be Info, links, about...</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="nt">socialIcons</span><span class="p">:</span><span class="w"> </span><span class="c"># optional</span><span class="w">
</span><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;platform&gt;&#34;</span><span class="w">
</span><span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;link&gt;&#34;</span><span class="w">
</span><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;platform 2&gt;&#34;</span><span class="w">
</span><span class="w">          </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;link2&gt;&#34;</span><span class="w">
</span></code></pre></div><hr>
<h3 id="profile-mode">Profile Mode</h3>
<p><img loading="lazy" src="/docs/features/images/profile.jpg" type="" alt="profile"  /></p>
<p>Shows Index/Home page as Full Page with Social Links and Image</p>
<p>add following to config file</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">params</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">profileMode</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;Title&gt;&#34;</span><span class="w"> </span><span class="c"># optional default will be site title</span><span class="w">
</span><span class="w">        </span><span class="nt">subtitle</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;This is subtitle&#34;</span><span class="w">
</span><span class="w">        </span><span class="nt">imageUrl</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;image link&gt;&#34;</span><span class="w"> </span><span class="c"># optional</span><span class="w">
</span><span class="w">        </span><span class="nt">imageTitle</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;title of image as alt&gt;&#34;</span><span class="w"> </span><span class="c"># optional</span><span class="w">
</span><span class="w">        </span><span class="nt">imageWidth</span><span class="p">:</span><span class="w"> </span><span class="m">120</span><span class="w"> </span><span class="c"># custom size</span><span class="w">
</span><span class="w">        </span><span class="nt">imageHeight</span><span class="p">:</span><span class="w"> </span><span class="m">120</span><span class="w"> </span><span class="c"># custom size</span><span class="w">
</span><span class="w">        </span><span class="nt">buttons</span><span class="p">:</span><span class="w">
</span><span class="w">            </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Archive</span><span class="w">
</span><span class="w">                </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/archive&#34;</span><span class="w">
</span><span class="w">            </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Github</span><span class="w">
</span><span class="w">                </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://github.com/&#34;</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="nt">socialIcons</span><span class="p">:</span><span class="w"> </span><span class="c"># optional</span><span class="w">
</span><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;platform&gt;&#34;</span><span class="w">
</span><span class="w">            </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;link&gt;&#34;</span><span class="w">
</span><span class="w">        </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;platform 2&gt;&#34;</span><span class="w">
</span><span class="w">            </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;link2&gt;&#34;</span><span class="w">
</span></code></pre></div><hr>
<h3 id="search-page">Search Page</h3>
<p>PaperModX uses <a href="https://fusejs.io/getting-started/different-builds.html#explanation-of-different-builds">Fuse.js Basic</a> for seach functionality</p>
<p>Add the following to site config, <code>config.yml</code></p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">outputs</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">home</span><span class="p">:</span><span class="w">
</span><span class="w">        </span>- <span class="l">HTML</span><span class="w">
</span><span class="w">        </span>- <span class="l">RSS</span><span class="w">
</span><span class="w">        </span>- <span class="l">JSON</span><span class="w"> </span><span class="c"># is necessary</span><span class="w">
</span></code></pre></div><p>Create a page with <code>search.md</code> in <code>content</code> directory with following content</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Search&#34;</span><span class="w"> </span><span class="c"># in any language you want</span><span class="w">
</span><span class="w"></span><span class="nt">layout</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;search&#34;</span><span class="w"> </span><span class="c"># is necessary</span><span class="w">
</span><span class="w"></span><span class="c"># url: &#34;/archive&#34;</span><span class="w">
</span><span class="w"></span><span class="c"># description: &#34;Description for Search&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;search&#34;</span><span class="w">
</span><span class="w"></span><span class="nn">---</span><span class="w">
</span><span class="w">
</span></code></pre></div><p>To hide a particular page from being searched, add it in post&rsquo;s fron&rsquo;t matter</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="nt">searchHidden</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></code></pre></div><blockquote>
<p>Search Page also has Key bindings:</p>
<ul>
<li>Arrow keys to move up/down the list</li>
<li>Enter key (return) or Right Arrow key to Go to highlighted page</li>
<li>Escape key to clear searchbox and results</li>
</ul>
</blockquote>
<p>For Multilingual use <code>search.&lt;lang&gt;.md</code> ex. <code>search.es.md</code>.</p>
<p><strong>Note:</strong> Search will work only on current language, user is currently on !</p>
<p><strong>Customizing Fusejs Options</strong></p>
<p>Refer <a href="https://fusejs.io/api/options.html">https://fusejs.io/api/options.html</a> for Options, Add those as shown below.</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">params</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">fuseOpts</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">isCaseSensitive</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w">        </span><span class="nt">shouldSort</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="w">        </span><span class="nt">location</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w">
</span><span class="w">        </span><span class="nt">distance</span><span class="p">:</span><span class="w"> </span><span class="m">1000</span><span class="w">
</span><span class="w">        </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="m">0.4</span><span class="w">
</span><span class="w">        </span><span class="nt">minMatchCharLength</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w">
</span><span class="w">        </span><span class="nt">keys</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;title&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;permalink&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;summary&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;content&#34;</span><span class="p">]</span><span class="w">
</span></code></pre></div><hr>
<h3 id="draft-page-indication">Draft Page indication</h3>
<p>adds <code>[draft]</code> mark to indicate draft pages.</p>
<hr>
<h3 id="post-cover-image">Post Cover Image</h3>
<p>In post&rsquo;s page-variables add :</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">cover</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;image path/url&gt;&#34;</span><span class="w">
</span><span class="w">    </span><span class="c"># can also paste direct link from external site</span><span class="w">
</span><span class="w">    </span><span class="c"># ex. https://i.ibb.co/K0HVPBd/paper-mod-profilemode.png</span><span class="w">
</span><span class="w">    </span><span class="nt">alt</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;alt text&gt;&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">caption</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;&lt;text&gt;&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">relative</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c"># To use relative path for cover image, used in hugo Page-bundles</span><span class="w">
</span></code></pre></div><p>When you include images in the <a href="https://gohugo.io/content-management/page-bundles/">Page Bundle</a>, multiple sizes of the image will automatically be provided using the HTML5 <code>srcset</code> field.</p>
<p>To reduce generation time and size of the site, you can disable this feature using</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">params</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">cover</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">responsiveImages</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></code></pre></div><p>To enable hyperlinks to the full image size on post pages, use</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">params</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">cover</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">linkFullImages</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></code></pre></div><hr>
<h3 id="share-buttons-on-post">Share Buttons on post</h3>
<p>Displays Share Buttons at Bottom of each post</p>
<p>to show share buttons add</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">params</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">ShowShareButtons</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></code></pre></div><hr>
<h3 id="show-post-reading-time">Show post reading time</h3>
<p>Displays Reading Time (the estimated time, in minutes, it takes to read the content.)</p>
<p>To show reading time add</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">Params</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">ShowReadingTime</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></code></pre></div><hr>
<h3 id="show-table-of-contents-toc-on-blog-post">Show Table of Contents (Toc) on blog post</h3>
<p>Displays ToC on blog-pages</p>
<p>To show ToC add following to page-variables</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">ShowToc</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></code></pre></div><p>To keep Toc Open <strong>by default</strong> on a post add following to page-variables:</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">TocOpen</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></code></pre></div><hr>
<h3 id="breadcrumb-navigation">BreadCrumb Navigation</h3>
<p>Adds BreadCrumb Navigation above Post&rsquo;s Title to show subsections and Navigation to Home</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">params</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">ShowBreadCrumbs</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></code></pre></div><p>Can be diabled for particular page&rsquo;s front-matter</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="nt">ShowBreadCrumbs</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="w"></span><span class="nn">---</span><span class="w">
</span><span class="w">
</span></code></pre></div><hr>
<h3 id="edit-link-for-posts">Edit Link for Posts</h3>
<p>Add a button to suggest changes by using the file path of the post to link to a edit destination.</p>
<p>For site config use:</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">Params</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">editPost</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">URL</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://github.com/&lt;path_to_repo&gt;/content&#34;</span><span class="w">
</span><span class="w">        </span><span class="nt">Text</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Suggest Changes&#34;</span><span class="w"> </span><span class="c"># edit text</span><span class="w">
</span><span class="w">        </span><span class="nt">appendFilePath</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># to append file path to Edit link</span><span class="w">
</span></code></pre></div><p>Can be modified for individual pages</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="nt">editPost</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">URL</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://github.com/&lt;path_to_repo&gt;/content&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">Text</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Suggest Changes&#34;</span><span class="w"> </span><span class="c"># edit text</span><span class="w">
</span><span class="w">    </span><span class="nt">appendFilePath</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># to append file path to Edit link</span><span class="w">
</span><span class="w"></span><span class="nn">---</span><span class="w">
</span><span class="w">
</span></code></pre></div><p>The example above would yield the following link for the post file <code>posts/post-name.md</code>:
<a href="https://github.com/">https://github.com/</a>&lt;path_to_repo&gt;/content/posts/post-name.md</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>editPost.URL</td>
<td>true</td>
<td>-</td>
</tr>
<tr>
<td>editPost.appendFilePath</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td>editPost.Text</td>
<td>false</td>
<td>&ldquo;Edit&rdquo;</td>
</tr>
</tbody>
</table>
<p>Since the link generated is a regular HTML anchor tag <code>&lt;a href=...&gt;</code>, you can
also use other URL schemas like <code>mailto://</code>, e.g.
<code>URL: &quot;mailto://mail@example.com?subject=Suggesting changes for &quot;</code></p>
<hr>
<h3 id="other-posts-suggestion-below-a-post">Other Posts suggestion below a post</h3>
<p>Adds a Previous / Next post suggestion under a single post</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">params</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">ShowPostNavLinks</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></code></pre></div><hr>
<h3 id="multiple-authors">Multiple Authors</h3>
<p>To Use multiple authors for a post, in post-variables:</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="nt">author</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;Me&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;You&#34;</span><span class="p">]</span><span class="w">
</span><span class="w"></span><span class="nn">---</span><span class="w">
</span><span class="w">
</span></code></pre></div><p>To use Multiple Authors Site-wide, in <code>config.yml</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">params</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">author</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;Me&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;You&#34;</span><span class="p">]</span><span class="w">
</span></code></pre></div><hr>
<h3 id="comments">Comments</h3>
<p>to add comments, create a html file</p>
<p><code>layouts/partials/comments.html</code></p>
<p>and paste code provided by your comments provider</p>
<p>also in config add this</p>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml"><span class="nt">params</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">comments</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></code></pre></div><p>read more about this <a href="https://gohugo.io/content-management/comments/">hugo-comments</a></p>
<hr>
<h3 id="accesskeys">AccessKeys</h3>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">c - ToC Open/Close
g - Go To Top
h - Home (according to current lang)
t - Theme toggle
/ - Jumps to search page if in menu
</code></pre></div><p><a href="https://www.w3schools.com/tags/att_global_accesskey.asp">What&rsquo;s AccessKeys ?</a></p>
<hr>
<h3 id="enhanced-seo">Enhanced SEO</h3>
<p><strong>Enabled only when <code>env: production</code></strong></p>
<ul>
<li><a href="https://support.google.com/webmasters/answer/7506797?hl=en">Rich Results/Snippets Support</a></li>
</ul>
<h4 id="twitter-cards-support">Twitter Cards Support</h4>
<ul>
<li>The Twitter Cards metadata, except <code>twitter:image</code> should not require
additional configuration, since it is generated from metadata that
you should already have (for instance the page title and description).</li>
<li>The <code>twitter:image</code> uses the <a href="#post-cover-image">Post Cover Image</a>, if present.</li>
<li>In the absence of a cover images, the first image from the <code>images</code>
frontmatter (a list) is used.
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">images</span><span class="p">:</span><span class="w">
</span><span class="w">  </span>- <span class="l">image_01.png</span><span class="w">
</span><span class="w">  </span>- <span class="l">image_02.png</span><span class="w">
</span></code></pre></div></li>
<li>Finally, if neither of those are provided, <code>twitter:image</code> comes from the first
<a href="https://gohugo.io/content-management/page-bundles/">Page Bundle</a>
image with <code>feature</code> in the name, with a fallback to the first image with
<code>cover</code> or <code>thumbnail</code> in the name.</li>
</ul>
<h4 id="opengraph-support">OpenGraph support</h4>
<ul>
<li>The OpenGraph metadata, except <code>og:image</code> should not require
additional configuration, since it is generated from metadata that
you should already have (for instance the page title and description).</li>
<li>The <code>og:image</code> uses the <a href="#post-cover-image">Post Cover Image</a>, if present.</li>
<li>In the absence of a cover images, the first image from the <code>images</code>
frontmatter (a list) is used.
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">images</span><span class="p">:</span><span class="w">
</span><span class="w">  </span>- <span class="l">image_01.png</span><span class="w">
</span><span class="w">  </span>- <span class="l">image_02.png</span><span class="w">
</span></code></pre></div></li>
<li>Finally, if neither of those are provided, <code>og:image</code> comes from the first
<a href="https://gohugo.io/content-management/page-bundles/">Page Bundle</a>
image with <code>feature</code> in the name, with a fallback to the first image with
<code>cover</code> or <code>thumbnail</code> in the name.</li>
<li>For pages, you can also add audio (using frontmatter <code>audio: filename.ext</code>) and/or
videos.
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">videos</span><span class="p">:</span><span class="w">
</span><span class="w">  </span>- <span class="l">filename01.mov</span><span class="w">
</span><span class="w">  </span>- <span class="l">filename02.avi</span><span class="w">
</span></code></pre></div></li>
</ul>
<hr>
<h3 id="multilingual-support">Multilingual Support</h3>
<hr>
<h3 id="misc">Misc</h3>
<h4 id="scroll-bar-themed-by-default">Scroll-Bar themed (by default)</h4>
<h4 id="smooth-scroll-between-in-page-links-by-default">Smooth Scroll between in-page links (by default)</h4>
<h4 id="scroll-to-top-button-by-default">Scroll-to-Top Button (by default)</h4>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">Displays a Scroll-to-Top button in right-bottom corner
</code></pre></div><h4 id="google-analytics-integration">Google Analytics integration</h4>
<h4 id="syntax-highlighting">Syntax highlighting</h4>
<h4 id="rss-feeds">RSS feeds</h4>
]]></content:encoded>
    </item>
    
    <item>
      <title>Hugo 中的命令行模式</title>
      <link>https://anriclee.github.io/posts/hugo_cmd_pattern/</link>
      <pubDate>Fri, 26 Jun 2020 00:00:00 +0000</pubDate>
      
      <guid>https://anriclee.github.io/posts/hugo_cmd_pattern/</guid>
      <description>最近在用 hugo 构建了个人博客之后，便有兴趣想研究下其源码。但是源码的体量之大，逻辑之复杂出乎我的意料。不过好在源码的结构比较清晰，有许多地方值得借鉴。
比如它的程序入口，非常简洁：
func main() { resp := commands.Execute(os.Args[1:]) if resp.Err != nil { if resp.IsUserError() { resp.Cmd.Println(&amp;#34;&amp;#34;) resp.Cmd.Println(resp.Cmd.UsageString()) } os.Exit(-1) } } 它将所有根据命令行参数传入的指令统一封装到 commands 包中。后面有新命令需求时，只需要新建一个 cmd 文件即可。
它是怎么做到的呢？
简而言之，就是在程序入口处将所有的命令类汇总，然后再根据输入参数args，决定要执行哪个cmd，看似增加了代码的复杂度，但是对于后续命令的扩展显得非常方便。
hugo 中使用了 builder 模式将所有的命令汇总，我这里简单起见，只初始化了一个数组，主要是体会其开闭原则的思想即可。
 Talk is cheap, show me the code
 借鉴它的思路，我写了一个简化版，可以参看，代码链接.</description>
      <content:encoded><![CDATA[<p>最近在用 hugo 构建了个人博客之后，便有兴趣想研究下其源码。但是源码的体量之大，逻辑之复杂出乎我的意料。不过好在源码的结构比较清晰，有许多地方值得借鉴。</p>
<p>比如它的程序入口，非常简洁：</p>
<div class="highlight"><pre class="chroma"><code class="language-Golang" data-lang="Golang"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">resp</span> <span class="o">:=</span> <span class="nx">commands</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Args</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>

	<span class="k">if</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">Err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="k">if</span> <span class="nx">resp</span><span class="p">.</span><span class="nf">IsUserError</span><span class="p">()</span> <span class="p">{</span>
			<span class="nx">resp</span><span class="p">.</span><span class="nx">Cmd</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;&#34;</span><span class="p">)</span>
			<span class="nx">resp</span><span class="p">.</span><span class="nx">Cmd</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">Cmd</span><span class="p">.</span><span class="nf">UsageString</span><span class="p">())</span>
		<span class="p">}</span>
		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>它将所有根据命令行参数传入的指令统一封装到 <code>commands</code> 包中。后面有新命令需求时，只需要新建一个 cmd 文件即可。</p>
<p>它是怎么做到的呢？</p>
<p>简而言之，就是在程序入口处将所有的命令类汇总，然后再根据输入参数<code>args</code>，决定要执行哪个<code>cmd</code>，看似增加了代码的复杂度，但是对于后续命令的扩展显得非常方便。</p>
<p>hugo 中使用了 builder 模式将所有的命令汇总，我这里简单起见，只初始化了一个数组，主要是体会其开闭原则的思想即可。</p>
<blockquote>
<p>Talk is cheap, show me the code</p>
</blockquote>
<p>借鉴它的思路，我写了一个简化版，可以参看，<a href="https://github.com/anriclee/GoPatterns/tree/main/cmdpattern">代码链接</a>.</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Markdown Syntax Guide</title>
      <link>https://anriclee.github.io/posts/markdown-syntax/</link>
      <pubDate>Mon, 11 Mar 2019 00:00:00 +0000</pubDate>
      
      <guid>https://anriclee.github.io/posts/markdown-syntax/</guid>
      <description>Sample article showcasing basic Markdown syntax and formatting for HTML elements.</description>
      <content:encoded><![CDATA[<p>This article offers a sample of basic Markdown syntax that can be used in Hugo content files, also it shows whether basic HTML elements are decorated with CSS in a Hugo theme.</p>
<h2 id="headings">Headings</h2>
<p>The following HTML <code>&lt;h1&gt;</code>—<code>&lt;h6&gt;</code> elements represent six levels of section headings. <code>&lt;h1&gt;</code> is the highest section level while <code>&lt;h6&gt;</code> is the lowest.</p>
<h1 id="h1">H1</h1>
<h2 id="h2">H2</h2>
<h3 id="h3">H3</h3>
<h4 id="h4">H4</h4>
<h5 id="h5">H5</h5>
<h6 id="h6">H6</h6>
<h2 id="paragraph">Paragraph</h2>
<p>Xerum, quo qui aut unt expliquam qui dolut labo. Aque venitatiusda cum, voluptionse latur sitiae dolessi aut parist aut dollo enim qui voluptate ma dolestendit peritin re plis aut quas inctum laceat est volestemque commosa as cus endigna tectur, offic to cor sequas etum rerum idem sintibus eiur? Quianimin porecus evelectur, cum que nis nust voloribus ratem aut omnimi, sitatur? Quiatem. Nam, omnis sum am facea corem alique molestrunt et eos evelece arcillit ut aut eos eos nus, sin conecerem erum fuga. Ri oditatquam, ad quibus unda veliamenimin cusam et facea ipsamus es exerum sitate dolores editium rerore eost, temped molorro ratiae volorro te reribus dolorer sperchicium faceata tiustia prat.</p>
<p>Itatur? Quiatae cullecum rem ent aut odis in re eossequodi nonsequ idebis ne sapicia is sinveli squiatum, core et que aut hariosam ex eat.</p>
<h2 id="blockquotes">Blockquotes</h2>
<p>The blockquote element represents content that is quoted from another source, optionally with a citation which must be within a <code>footer</code> or <code>cite</code> element, and optionally with in-line changes such as annotations and abbreviations.</p>
<h4 id="blockquote-without-attribution">Blockquote without attribution</h4>
<blockquote>
<p>Tiam, ad mint andaepu dandae nostion secatur sequo quae.
<strong>Note</strong> that you can use <em>Markdown syntax</em> within a blockquote.</p>
</blockquote>
<h4 id="blockquote-with-attribution">Blockquote with attribution</h4>
<blockquote>
<p>Don&rsquo;t communicate by sharing memory, share memory by communicating.</p>
<p>— <cite>Rob Pike<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></cite></p>
</blockquote>
<h2 id="tables">Tables</h2>
<p>Tables aren&rsquo;t part of the core Markdown spec, but Hugo supports them out-of-the-box.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Age</th>
</tr>
</thead>
<tbody>
<tr>
<td>Bob</td>
<td>27</td>
</tr>
<tr>
<td>Alice</td>
<td>23</td>
</tr>
</tbody>
</table>
<h4 id="inline-markdown-within-tables">Inline Markdown within tables</h4>
<table>
<thead>
<tr>
<th>Italics</th>
<th>Bold</th>
<th>Code</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>italics</em></td>
<td><strong>bold</strong></td>
<td><code>code</code></td>
</tr>
</tbody>
</table>
<h2 id="code-blocks">Code Blocks</h2>
<h4 id="inline-code">Inline Code</h4>
<p><code>This is Inline Code</code></p>
<h4 id="only-pre">Only <code>pre</code></h4>
<pre>
This is pre text
</pre>
<h4 id="code-block-with-backticks">Code block with backticks</h4>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
        &lt;title&gt;Example HTML5 Document&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;p&gt;Test&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><h4 id="code-block-with-backticks-and-language-specified">Code block with backticks and language specified</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;utf-8&#34;</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Example HTML5 Document<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;description&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;Sample article showcasing basic Markdown syntax and formatting for HTML elements.&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Test<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="code-block-indented-with-four-spaces">Code block indented with four spaces</h4>
<pre><code>&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;title&gt;Example HTML5 Document&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;p&gt;Test&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h4 id="code-block-with-hugos-internal-highlight-shortcode">Code block with Hugo&rsquo;s internal highlight shortcode</h4>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;utf-8&#34;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Example HTML5 Document<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Test<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></div>
<h4 id="gist">Gist</h4>
<script type="application/javascript" src="https://gist.github.com/spf13/7896402.js"></script>

<h2 id="list-types">List Types</h2>
<h4 id="ordered-list">Ordered List</h4>
<ol>
<li>First item</li>
<li>Second item</li>
<li>Third item</li>
</ol>
<h4 id="unordered-list">Unordered List</h4>
<ul>
<li>List item</li>
<li>Another item</li>
<li>And another item</li>
</ul>
<h4 id="nested-list">Nested list</h4>
<ul>
<li>Fruit
<ul>
<li>Apple</li>
<li>Orange</li>
<li>Banana</li>
</ul>
</li>
<li>Dairy
<ul>
<li>Milk</li>
<li>Cheese</li>
</ul>
</li>
</ul>
<h2 id="other-elements--abbr-sub-sup-kbd-mark">Other Elements — abbr, sub, sup, kbd, mark</h2>
<p><abbr title="Graphics Interchange Format">GIF</abbr> is a bitmap image format.</p>
<p>H<sub>2</sub>O</p>
<p>X<sup>n</sup> + Y<sup>n</sup> = Z<sup>n</sup></p>
<p>Press <kbd><kbd>CTRL</kbd>+<kbd>ALT</kbd>+<kbd>Delete</kbd></kbd> to end the session.</p>
<p>Most <mark>salamanders</mark> are nocturnal, and hunt for insects, worms, and other small creatures.</p>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>The above quote is excerpted from Rob Pike&rsquo;s <a href="https://www.youtube.com/watch?v=PAAkCSZUG1c">talk</a> during Gopherfest, November 18, 2015.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>]]></content:encoded>
    </item>
    
    <item>
      <title>Rich Content</title>
      <link>https://anriclee.github.io/posts/rich-content/</link>
      <pubDate>Sun, 10 Mar 2019 00:00:00 +0000</pubDate>
      
      <guid>https://anriclee.github.io/posts/rich-content/</guid>
      <description>A brief description of Hugo Shortcodes</description>
      <content:encoded><![CDATA[<p>Hugo ships with several <a href="https://gohugo.io/content-management/shortcodes/#use-hugos-built-in-shortcodes">Built-in Shortcodes</a> for rich content, along with a <a href="https://gohugo.io/about/hugo-and-gdpr/">Privacy Config</a> and a set of Simple Shortcodes that enable static and no-JS versions of various social media embeds.</p>
<hr>
<h2 id="youtube-privacy-enhanced-shortcode">YouTube Privacy Enhanced Shortcode</h2>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube-nocookie.com/embed/ZJthWmvUzzc" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<br>
<hr>
<h2 id="twitter-simple-shortcode">Twitter Simple Shortcode</h2>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">“In addition to being more logical, asymmetry has the advantage that its complete appearance is far more optically effective than symmetry.”<br>— Jan Tschichold <a href="https://t.co/gcv7SrhvJb">pic.twitter.com/gcv7SrhvJb</a></p>&mdash; Graphic Design History (@DesignReviewed) <a href="https://twitter.com/DesignReviewed/status/1085870671291310081?ref_src=twsrc%5Etfw">January 17, 2019</a></blockquote>

<br>
<hr>
<h2 id="vimeo-simple-shortcode">Vimeo Simple Shortcode</h2>






<style>
.__h_video {
   position: relative;
   padding-bottom: 56.23%;
   height: 0;
   overflow: hidden;
   width: 100%;
   background: #000;
}
.__h_video img {
   width: 100%;
   height: auto;
   color: #000;
}
.__h_video .play {
   height: 72px;
   width: 72px;
   left: 50%;
   top: 50%;
   margin-left: -36px;
   margin-top: -36px;
   position: absolute;
   cursor: pointer;
}
</style>


<div class="s_video_simple __h_video">
<a href="https://vimeo.com/4.8912912e&#43;07" rel="noopener" target="_blank">


<img src="https://i.vimeocdn.com/video/337401969-979f0cc9f55fdf305fb8984e90d92639ec9d7ecc4c9dfbc6536e28edb43784ce-d_640" srcset="https://i.vimeocdn.com/video/337401969-979f0cc9f55fdf305fb8984e90d92639ec9d7ecc4c9dfbc6536e28edb43784ce-d_640 1x, https://i.vimeocdn.com/video/337401969-979f0cc9f55fdf305fb8984e90d92639ec9d7ecc4c9dfbc6536e28edb43784ce-d_640 2x" alt="Sing Jan Swing - Kinetic Type">
<div class="play"><svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 61 61"><circle cx="30.5" cy="30.5" r="30.5" opacity=".8" fill="#000"></circle><path d="M25.3 19.2c-2.1-1.2-3.8-.2-3.8 2.2v18.1c0 2.4 1.7 3.4 3.8 2.2l16.6-9.1c2.1-1.2 2.1-3.2 0-4.4l-16.6-9z" fill="#fff"></path></svg></div></a></div>]]></content:encoded>
    </item>
    
    <item>
      <title>Placeholder Text</title>
      <link>https://anriclee.github.io/posts/placeholder-text/</link>
      <pubDate>Sat, 09 Mar 2019 00:00:00 +0000</pubDate>
      
      <guid>https://anriclee.github.io/posts/placeholder-text/</guid>
      <description>Lorem Ipsum Dolor Si Amet</description>
      <content:encoded><![CDATA[<p>Lorem est tota propiore conpellat pectoribus de pectora summo.</p>
<p>Redit teque digerit hominumque toris verebor lumina non cervice subde tollit usus habet Arctonque, furores quas nec ferunt. Quoque montibus nunc caluere tempus inhospita parcite confusaque translucet patri vestro qui optatis lumine cognoscere flos nubis! Fronde ipsamque patulos Dryopen deorum.</p>
<ol>
<li>Exierant elisi ambit vivere dedere</li>
<li>Duce pollice</li>
<li>Eris modo</li>
<li>Spargitque ferrea quos palude</li>
</ol>
<p>Rursus nulli murmur; hastile inridet ut ab gravi sententia! Nomine potitus silentia flumen, sustinet placuit petis in dilapsa erat sunt. Atria tractus malis.</p>
<ol>
<li>Comas hunc haec pietate fetum procerum dixit</li>
<li>Post torum vates letum Tiresia</li>
<li>Flumen querellas</li>
<li>Arcanaque montibus omnes</li>
<li>Quidem et</li>
</ol>
<h1 id="vagus-elidunt">Vagus elidunt</h1>
<p><svg class="canon" xmlns="http://www.w3.org/2000/svg" overflow="visible" viewBox="0 0 496 373" height="373" width="496"><g fill="none"><path stroke="#000" stroke-width=".75" d="M.599 372.348L495.263 1.206M.312.633l494.95 370.853M.312 372.633L247.643.92M248.502.92l246.76 370.566M330.828 123.869V1.134M330.396 1.134L165.104 124.515"></path><path stroke="#ED1C24" stroke-width=".75" d="M275.73 41.616h166.224v249.05H275.73zM54.478 41.616h166.225v249.052H54.478z"></path><path stroke="#000" stroke-width=".75" d="M.479.375h495v372h-495zM247.979.875v372"></path><ellipse cx="498.729" cy="177.625" rx=".75" ry="1.25"></ellipse><ellipse cx="247.229" cy="377.375" rx=".75" ry="1.25"></ellipse></g></svg></p>
<p><a href="https://en.wikipedia.org/wiki/Canons_of_page_construction#Van_de_Graaf_canon">The Van de Graaf Canon</a></p>
<h2 id="mane-refeci-capiebant-unda-mulcebat">Mane refeci capiebant unda mulcebat</h2>
<p>Victa caducifer, malo vulnere contra dicere aurato, ludit regale, voca! Retorsit colit est profanae esse virescere furit nec; iaculi matertera et visa est, viribus. Divesque creatis, tecta novat collumque vulnus est, parvas. <strong>Faces illo pepulere</strong> tempus adest. Tendit flamma, ab opes virum sustinet, sidus sequendo urbis.</p>
<p>Iubar proles corpore raptos vero auctor imperium; sed et huic: manus caeli Lelegas tu lux. Verbis obstitit intus oblectamina fixis linguisque ausus sperare Echionides cornuaque tenent clausit possit. Omnia putatur. Praeteritae refert ausus; ferebant e primus lora nutat, vici quae mea ipse. Et iter nil spectatae vulnus haerentia iuste et exercebat, sui et.</p>
<p>Eurytus Hector, materna ipsumque ut Politen, nec, nate, ignari, vernum cohaesit sequitur. Vel <strong>mitis temploque</strong> vocatus, inque alis, <em>oculos nomen</em> non silvis corpore coniunx ne displicet illa. Crescunt non unus, vidit visa quantum inmiti flumina mortis facto sic: undique a alios vincula sunt iactata abdita! Suspenderat ego fuit tendit: luna, ante urbem Propoetides <strong>parte</strong>.</p>


<style>
.canon { background: white; width: 100%; height: auto; }
</style>]]></content:encoded>
    </item>
    
    <item>
      <title>Math Typesetting</title>
      <link>https://anriclee.github.io/docs/math-typesetting/</link>
      <pubDate>Fri, 08 Mar 2019 00:00:00 +0000</pubDate>
      
      <guid>https://anriclee.github.io/docs/math-typesetting/</guid>
      <description>A brief guide to setup KaTeX</description>
      <content:encoded><![CDATA[<p>Mathematical notation in a Hugo project can be enabled by using third party JavaScript libraries.</p>
<p>In this example we will be using <a href="https://katex.org/">KaTeX</a></p>
<ul>
<li>Create a partial under <code>/layouts/partials/math.html</code></li>
<li>Within this partial reference the <a href="https://katex.org/docs/autorender.html">Auto-render Extension</a> or host these scripts locally.</li>
<li>Include the partial in your templates (<a href="../faq/#custom-head--footer"><code>extend_head.html</code></a>) like so:</li>
<li>refer <a href="https://github.com/adityatelange/hugo-PaperMod/issues/236">ISSUE #236</a></li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">{{</span> <span class="k">if</span> or .Params.math .Site.Params.math <span class="o">}}</span>
<span class="o">{{</span> partial <span class="s2">&#34;math.html&#34;</span> . <span class="o">}}</span>
<span class="o">{{</span> end <span class="o">}}</span>
</code></pre></div><ul>
<li>To enable KaTex globally set the parameter <code>math</code> to <code>true</code> in a project&rsquo;s configuration</li>
<li>To enable KaTex on a per page basis include the parameter <code>math: true</code> in content files</li>
</ul>
<p><strong>Note:</strong> Use the online reference of <a href="https://katex.org/docs/supported.html">Supported TeX Functions</a></p>



<!-- KaTeX -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>


<h3 id="examples">Examples</h3>


<p>
Inline math: \(\varphi = \dfrac{1+\sqrt5}{2}= 1.6180339887…\)
</p>

<p>Block math:</p>
<p>$$
\varphi = 1+\frac{1} {1+\frac{1} {1+\frac{1} {1+\cdots} } }
$$</p>]]></content:encoded>
    </item>
    
    <item>
      <title>Emoji Support</title>
      <link>https://anriclee.github.io/docs/emoji-support/</link>
      <pubDate>Tue, 05 Mar 2019 00:00:00 +0000</pubDate>
      
      <guid>https://anriclee.github.io/docs/emoji-support/</guid>
      <description>Guide to emoji usage in Hugo</description>
      <content:encoded><![CDATA[<p>Emoji can be enabled in a Hugo project in a number of ways.</p>
<p>The <a href="https://gohugo.io/functions/emojify/"><code>emojify</code></a> function can be called directly in templates or <a href="https://gohugo.io/templates/shortcode-templates/#inline-shortcodes">Inline Shortcodes</a>.</p>
<p>To enable emoji globally, set <code>enableEmoji</code> to <code>true</code> in your site&rsquo;s <a href="https://gohugo.io/getting-started/configuration/">configuration</a> and then you can type emoji shorthand codes directly in content files; e.g.</p>
<p><span class="nowrap"><span class="emojify">🙈</span> <code>🙈</code></span>  <span class="nowrap"><span class="emojify">🙉</span> <code>🙉</code></span>  <span class="nowrap"><span class="emojify">🙊</span> <code>🙊</code></span></p>
<br>
<p>The <a href="http://www.emoji-cheat-sheet.com/">Emoji cheat sheet</a> is a useful reference for emoji shorthand codes.</p>
<hr>
<p><strong>N.B.</strong> The above steps enable Unicode Standard emoji characters and sequences in Hugo, however the rendering of these glyphs depends on the browser and the platform. To style the emoji you can either use a third party emoji font or a font stack; e.g.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">.emoji {
font-family: Apple Color Emoji, Segoe UI Emoji, NotoColorEmoji, Segoe UI Symbol, Android Emoji, EmojiSymbols;
}</code></pre></div>


<style>
.emojify {
	font-family: Apple Color Emoji, Segoe UI Emoji, NotoColorEmoji, Segoe UI Symbol, Android Emoji, EmojiSymbols;
	font-size: 2rem;
	vertical-align: middle;
}
@media screen and (max-width:650px) {
  .nowrap {
    display: block;
    margin: 25px 0;
  }
}
</style>]]></content:encoded>
    </item>
    
  </channel>
</rss>
